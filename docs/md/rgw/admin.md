<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# admin

```go
import "github.com/ceph/go-ceph/rgw/admin"
```

Package admin contains a set of wrappers around Ceph's RGW Admin Ops API\.

## Index

- [type API](<#type-api>)
  - [func New(endpoint, accessKey, secretKey string, httpClient HTTPClient) (*API, error)](<#func-new>)
  - [func (api *API) AddUserCap(ctx context.Context, uid, userCap string) ([]UserCapSpec, error)](<#func-api-addusercap>)
  - [func (api *API) CreateUser(ctx context.Context, user User) (User, error)](<#func-api-createuser>)
  - [func (api *API) GetBucketInfo(ctx context.Context, bucket Bucket) (Bucket, error)](<#func-api-getbucketinfo>)
  - [func (api *API) GetBucketPolicy(ctx context.Context, bucket Bucket) (Policy, error)](<#func-api-getbucketpolicy>)
  - [func (api *API) GetUsage(ctx context.Context, usage Usage) (Usage, error)](<#func-api-getusage>)
  - [func (api *API) GetUser(ctx context.Context, user User) (User, error)](<#func-api-getuser>)
  - [func (api *API) GetUserQuota(ctx context.Context, quota QuotaSpec) (QuotaSpec, error)](<#func-api-getuserquota>)
  - [func (api *API) GetUsers(ctx context.Context) (*[]string, error)](<#func-api-getusers>)
  - [func (api *API) ListBuckets(ctx context.Context) ([]string, error)](<#func-api-listbuckets>)
  - [func (api *API) ModifyUser(ctx context.Context, user User) (User, error)](<#func-api-modifyuser>)
  - [func (api *API) RemoveBucket(ctx context.Context, bucket Bucket) error](<#func-api-removebucket>)
  - [func (api *API) RemoveUser(ctx context.Context, user User) error](<#func-api-removeuser>)
  - [func (api *API) RemoveUserCap(ctx context.Context, uid, userCap string) ([]UserCapSpec, error)](<#func-api-removeusercap>)
  - [func (api *API) SetUserQuota(ctx context.Context, quota QuotaSpec) error](<#func-api-setuserquota>)
  - [func (api *API) TrimUsage(ctx context.Context, usage Usage) error](<#func-api-trimusage>)
- [type Bucket](<#type-bucket>)
- [type HTTPClient](<#type-httpclient>)
- [type Policy](<#type-policy>)
- [type QuotaSpec](<#type-quotaspec>)
- [type Usage](<#type-usage>)
- [type User](<#type-user>)
- [type UserCapSpec](<#type-usercapspec>)
- [type UserKeySpec](<#type-userkeyspec>)
- [type UserStat](<#type-userstat>)


## type [API](<https://github.com/ceph/go-ceph/blob/master/rgw/admin/radosgw.go#L35-L40>)

API struct for New Client

```go
type API struct {
    AccessKey  string
    SecretKey  string
    Endpoint   string
    HTTPClient HTTPClient
}
```

### func [New](<https://github.com/ceph/go-ceph/blob/master/rgw/admin/radosgw.go#L43>)

```go
func New(endpoint, accessKey, secretKey string, httpClient HTTPClient) (*API, error)
```

New returns client for Ceph RGW

### func \(\*API\) [AddUserCap](<https://github.com/ceph/go-ceph/blob/master/rgw/admin/caps.go#L13>)

```go
func (api *API) AddUserCap(ctx context.Context, uid, userCap string) ([]UserCapSpec, error)
```

AddUserCap adds the capabilities for a user\.

On Success\, it returns the updated list of UserCaps for the user\.

### func \(\*API\) [CreateUser](<https://github.com/ceph/go-ceph/blob/master/rgw/admin/user.go#L102>)

```go
func (api *API) CreateUser(ctx context.Context, user User) (User, error)
```

CreateUser creates a user in the object store

### func \(\*API\) [GetBucketInfo](<https://github.com/ceph/go-ceph/blob/master/rgw/admin/bucket.go#L100>)

```go
func (api *API) GetBucketInfo(ctx context.Context, bucket Bucket) (Bucket, error)
```

GetBucketInfo will return various information about a specific token

### func \(\*API\) [GetBucketPolicy](<https://github.com/ceph/go-ceph/blob/master/rgw/admin/bucket.go#L116>)

```go
func (api *API) GetBucketPolicy(ctx context.Context, bucket Bucket) (Policy, error)
```

GetBucketPolicy \- http://docs.ceph.com/docs/mimic/radosgw/adminops/#get-bucket-or-object-policy

### func \(\*API\) [GetUsage](<https://github.com/ceph/go-ceph/blob/master/rgw/admin/usage.go#L52>)

```go
func (api *API) GetUsage(ctx context.Context, usage Usage) (Usage, error)
```

GetUsage request bandwidth usage information on the object store

### func \(\*API\) [GetUser](<https://github.com/ceph/go-ceph/blob/master/rgw/admin/user.go#L60>)

```go
func (api *API) GetUser(ctx context.Context, user User) (User, error)
```

GetUser retrieves a given object store user

### func \(\*API\) [GetUserQuota](<https://github.com/ceph/go-ceph/blob/master/rgw/admin/quota.go#L23>)

```go
func (api *API) GetUserQuota(ctx context.Context, quota QuotaSpec) (QuotaSpec, error)
```

GetUserQuota will return the quota for a user

### func \(\*API\) [GetUsers](<https://github.com/ceph/go-ceph/blob/master/rgw/admin/user.go#L87>)

```go
func (api *API) GetUsers(ctx context.Context) (*[]string, error)
```

GetUsers lists all object store users

### func \(\*API\) [ListBuckets](<https://github.com/ceph/go-ceph/blob/master/rgw/admin/bucket.go#L85>)

```go
func (api *API) ListBuckets(ctx context.Context) ([]string, error)
```

ListBuckets will return the list of all buckets present in the object store

### func \(\*API\) [ModifyUser](<https://github.com/ceph/go-ceph/blob/master/rgw/admin/user.go#L141>)

```go
func (api *API) ModifyUser(ctx context.Context, user User) (User, error)
```

ModifyUser \- http://docs.ceph.com/docs/latest/radosgw/adminops/#modify-user

### func \(\*API\) [RemoveBucket](<https://github.com/ceph/go-ceph/blob/master/rgw/admin/bucket.go#L134>)

```go
func (api *API) RemoveBucket(ctx context.Context, bucket Bucket) error
```

RemoveBucket will remove a given token from the object store

### func \(\*API\) [RemoveUser](<https://github.com/ceph/go-ceph/blob/master/rgw/admin/user.go#L127>)

```go
func (api *API) RemoveUser(ctx context.Context, user User) error
```

RemoveUser remove an user from the object store

### func \(\*API\) [RemoveUserCap](<https://github.com/ceph/go-ceph/blob/master/rgw/admin/caps.go#L39>)

```go
func (api *API) RemoveUserCap(ctx context.Context, uid, userCap string) ([]UserCapSpec, error)
```

RemoveUserCap removes the capabilities from a user\.

On Success\, it returns the updated list of UserCaps for the user\.

### func \(\*API\) [SetUserQuota](<https://github.com/ceph/go-ceph/blob/master/rgw/admin/quota.go#L48>)

```go
func (api *API) SetUserQuota(ctx context.Context, quota QuotaSpec) error
```

SetUserQuota sets quota to a user Global quotas \(https://docs.ceph.com/en/latest/radosgw/admin/#reading-writing-global-quotas\) are not surfaced in the Admin Ops API So this library cannot expose it yet

### func \(\*API\) [TrimUsage](<https://github.com/ceph/go-ceph/blob/master/rgw/admin/usage.go#L67>)

```go
func (api *API) TrimUsage(ctx context.Context, usage Usage) error
```

TrimUsage removes bandwidth usage information\. With no dates specified\, removes all usage information\.

## type [Bucket](<https://github.com/ceph/go-ceph/blob/master/rgw/admin/bucket.go#L11-L51>)

Bucket describes an object store bucket

```go
type Bucket struct {
    Bucket            string `json:"bucket" url:"bucket"`
    Zonegroup         string `json:"zonegroup"`
    PlacementRule     string `json:"placement_rule"`
    ExplicitPlacement struct {
        DataPool      string `json:"data_pool"`
        DataExtraPool string `json:"data_extra_pool"`
        IndexPool     string `json:"index_pool"`
    }   `json:"explicit_placement"`
    ID        string `json:"id"`
    Marker    string `json:"marker"`
    IndexType string `json:"index_type"`
    Owner     string `json:"owner"`
    Ver       string `json:"ver"`
    MasterVer string `json:"master_ver"`
    Mtime     string `json:"mtime"`
    MaxMarker string `json:"max_marker"`
    Usage     struct {
        RgwMain struct {
            Size           *uint64 `json:"size"`
            SizeActual     *uint64 `json:"size_actual"`
            SizeUtilized   *uint64 `json:"size_utilized"`
            SizeKb         *uint64 `json:"size_kb"`
            SizeKbActual   *uint64 `json:"size_kb_actual"`
            SizeKbUtilized *uint64 `json:"size_kb_utilized"`
            NumObjects     *uint64 `json:"num_objects"`
        }   `json:"rgw.main"`
        RgwMultimeta struct {
            Size           *uint64 `json:"size"`
            SizeActual     *uint64 `json:"size_actual"`
            SizeUtilized   *uint64 `json:"size_utilized"`
            SizeKb         *uint64 `json:"size_kb"`
            SizeKbActual   *uint64 `json:"size_kb_actual"`
            SizeKbUtilized *uint64 `json:"size_kb_utilized"`
            NumObjects     *uint64 `json:"num_objects"`
        }   `json:"rgw.multimeta"`
    }   `json:"usage"`
    BucketQuota QuotaSpec `json:"bucket_quota"`
    Policy      *bool     `url:"policy"`
    PurgeObject *bool     `url:"purge-objects"`
}
```

## type [HTTPClient](<https://github.com/ceph/go-ceph/blob/master/rgw/admin/radosgw.go#L30-L32>)

HTTPClient interface that conforms to that of the http package's Client\.

```go
type HTTPClient interface {
    Do(req *http.Request) (*http.Response, error)
}
```

## type [Policy](<https://github.com/ceph/go-ceph/blob/master/rgw/admin/bucket.go#L54-L82>)

Policy describes a bucket policy

```go
type Policy struct {
    ACL struct {
        ACLUserMap []struct {
            User string `json:"user"`
            ACL  *int   `json:"acl"`
        }   `json:"acl_user_map"`
        ACLGroupMap []interface{} `json:"acl_group_map"`
        GrantMap    []struct {
            ID    string `json:"id"`
            Grant struct {
                Type struct {
                    Type int `json:"type"`
                }   `json:"type"`
                ID         string `json:"id"`
                Email      string `json:"email"`
                Permission struct {
                    Flags int `json:"flags"`
                }   `json:"permission"`
                Name    string `json:"name"`
                Group   *int   `json:"group"`
                URLSpec string `json:"url_spec"`
            }   `json:"grant"`
        }   `json:"grant_map"`
    }   `json:"acl"`
    Owner struct {
        ID          string `json:"id"`
        DisplayName string `json:"display_name"`
    }   `json:"owner"`
}
```

## type [QuotaSpec](<https://github.com/ceph/go-ceph/blob/master/rgw/admin/quota.go#L12-L20>)

QuotaSpec describes an object store quota for a user or a bucket Only user's quota are supported

```go
type QuotaSpec struct {
    UID        string `json:"user_id" url:"uid"`
    QuotaType  string `url:"quota-type"`
    Enabled    *bool  `json:"enabled" url:"enabled"`
    CheckOnRaw bool   `json:"check_on_raw"`
    MaxSize    *int64 `json:"max_size" url:"max-size"`
    MaxSizeKb  *int   `json:"max_size_kb" url:"max-size-kb"`
    MaxObjects *int64 `json:"max_objects" url:"max-objects"`
}
```

## type [Usage](<https://github.com/ceph/go-ceph/blob/master/rgw/admin/usage.go#L11-L49>)

Usage struct

```go
type Usage struct {
    Entries []struct {
        User    string `json:"user"`
        Buckets []struct {
            Bucket     string `json:"bucket"`
            Time       string `json:"time"`
            Epoch      uint64 `json:"epoch"`
            Owner      string `json:"owner"`
            Categories []struct {
                Category      string `json:"category"`
                BytesSent     uint64 `json:"bytes_sent"`
                BytesReceived uint64 `json:"bytes_received"`
                Ops           uint64 `json:"ops"`
                SuccessfulOps uint64 `json:"successful_ops"`
            }   `json:"categories"`
        }   `json:"buckets"`
    }   `json:"entries"`
    Summary []struct {
        User       string `json:"user"`
        Categories []struct {
            Category      string `json:"category"`
            BytesSent     uint64 `json:"bytes_sent"`
            BytesReceived uint64 `json:"bytes_received"`
            Ops           uint64 `json:"ops"`
            SuccessfulOps uint64 `json:"successful_ops"`
        }   `json:"categories"`
        Total struct {
            BytesSent     uint64 `json:"bytes_sent"`
            BytesReceived uint64 `json:"bytes_received"`
            Ops           uint64 `json:"ops"`
            SuccessfulOps uint64 `json:"successful_ops"`
        }   `json:"total"`
    }   `json:"summary"`
    Start       string `url:"start"` //Example:	2012-09-25 16:00:00
    End         string `url:"end"`
    ShowEntries *bool  `url:"show-entries"`
    ShowSummary *bool  `url:"show-summary"`
    RemoveAll   *bool  `url:"remove-all"` //true
}
```

## type [User](<https://github.com/ceph/go-ceph/blob/master/rgw/admin/user.go#L11-L37>)

User is GO representation of the json output of a user creation

```go
type User struct {
    ID                  string        `json:"user_id" url:"uid"`
    DisplayName         string        `json:"display_name" url:"display-name"`
    Email               string        `json:"email" url:"email"`
    Suspended           *int          `json:"suspended" url:"suspended"`
    MaxBuckets          *int          `json:"max_buckets" url:"max-buckets"`
    Subusers            []interface{} `json:"subusers"`
    Keys                []UserKeySpec `json:"keys"`
    SwiftKeys           []interface{} `json:"swift_keys"`
    Caps                []UserCapSpec `json:"caps"`
    OpMask              string        `json:"op_mask"`
    DefaultPlacement    string        `json:"default_placement"`
    DefaultStorageClass string        `json:"default_storage_class"`
    PlacementTags       []interface{} `json:"placement_tags"`
    BucketQuota         QuotaSpec     `json:"bucket_quota"`
    UserQuota           QuotaSpec     `json:"user_quota"`
    TempURLKeys         []interface{} `json:"temp_url_keys"`
    Type                string        `json:"type"`
    MfaIds              []interface{} `json:"mfa_ids"`
    KeyType             string        `url:"key-type"`
    Tenant              string        `url:"tenant"`
    GenerateKey         *bool         `url:"generate-key"`
    PurgeData           *int          `url:"purge-data"`
    GenerateStat        *bool         `url:"stats"`
    Stat                UserStat      `json:"stats"`
    UserCaps            string        `url:"user-caps"`
}
```

## type [UserCapSpec](<https://github.com/ceph/go-ceph/blob/master/rgw/admin/user.go#L40-L43>)

UserCapSpec represents a user capability which gives access to certain ressources

```go
type UserCapSpec struct {
    Type string `json:"type"`
    Perm string `json:"perm"`
}
```

## type [UserKeySpec](<https://github.com/ceph/go-ceph/blob/master/rgw/admin/user.go#L46-L50>)

UserKeySpec is the user credential configuration

```go
type UserKeySpec struct {
    User      string `json:"user"`
    AccessKey string `json:"access_key" url:"access-key"`
    SecretKey string `json:"secret_key" url:"secret-key"`
}
```

## type [UserStat](<https://github.com/ceph/go-ceph/blob/master/rgw/admin/user.go#L53-L57>)

UserStat contains information about storage consumption by the ceph user

```go
type UserStat struct {
    Size        *uint64 `json:"size"`
    SizeRounded *uint64 `json:"size_rounded"`
    NumObjects  *uint64 `json:"num_objects"`
}
```



Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
