<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# rbd

```go
import "github.com/ceph/go-ceph/rbd"
```

Package rbd contains a set of wrappers around Ceph's librbd API\.

## Index

- [Constants](<#constants>)
- [Variables](<#variables>)
- [func CloneFromImage(parent *Image, snapName string, destctx *rados.IOContext, name string, rio *ImageOptions) error](<#func-clonefromimage>)
- [func CloneImage(ioctx *rados.IOContext, parentName, snapName string, destctx *rados.IOContext, name string, rio *ImageOptions) error](<#func-cloneimage>)
- [func CreateImage(ioctx *rados.IOContext, name string, size uint64, rio *ImageOptions) error](<#func-createimage>)
- [func CreateMirrorPeerBootstrapToken(ioctx *rados.IOContext) (string, error)](<#func-createmirrorpeerbootstraptoken>)
- [func GetAllPoolStats(ioctx *rados.IOContext) (map[PoolStatOption]uint64, error)](<#func-getallpoolstats>)
- [func GetImageNames(ioctx *rados.IOContext) ([]string, error)](<#func-getimagenames>)
- [func GetMirrorSiteName(conn *rados.Conn) (string, error)](<#func-getmirrorsitename>)
- [func GetMirrorUUID(ioctx *rados.IOContext) (string, error)](<#func-getmirroruuid>)
- [func GetPoolMetadata(ioctx *rados.IOContext, key string) (string, error)](<#func-getpoolmetadata>)
- [func GroupCreate(ioctx *rados.IOContext, name string) error](<#func-groupcreate>)
- [func GroupImageAdd(groupIoctx *rados.IOContext, groupName string, imageIoctx *rados.IOContext, imageName string) error](<#func-groupimageadd>)
- [func GroupImageRemove(groupIoctx *rados.IOContext, groupName string, imageIoctx *rados.IOContext, imageName string) error](<#func-groupimageremove>)
- [func GroupImageRemoveByID(groupIoctx *rados.IOContext, groupName string, imageIoctx *rados.IOContext, imageID string) error](<#func-groupimageremovebyid>)
- [func GroupList(ioctx *rados.IOContext) ([]string, error)](<#func-grouplist>)
- [func GroupRemove(ioctx *rados.IOContext, name string) error](<#func-groupremove>)
- [func GroupRename(ioctx *rados.IOContext, src, dest string) error](<#func-grouprename>)
- [func GroupSnapCreate(ioctx *rados.IOContext, group, snap string) error](<#func-groupsnapcreate>)
- [func GroupSnapRemove(ioctx *rados.IOContext, group, snap string) error](<#func-groupsnapremove>)
- [func GroupSnapRename(ioctx *rados.IOContext, group, src, dest string) error](<#func-groupsnaprename>)
- [func GroupSnapRollback(ioctx *rados.IOContext, group, snap string) error](<#func-groupsnaprollback>)
- [func GroupSnapRollbackWithProgress(ioctx *rados.IOContext, group, snap string, cb GroupSnapRollbackCallback, data interface{}) error](<#func-groupsnaprollbackwithprogress>)
- [func ImportMirrorPeerBootstrapToken(ioctx *rados.IOContext, direction MirrorPeerDirection, token string) error](<#func-importmirrorpeerbootstraptoken>)
- [func MirrorImageStatusSummary(ioctx *rados.IOContext) (map[MirrorImageStatusState]uint, error)](<#func-mirrorimagestatussummary>)
- [func NamespaceCreate(ioctx *rados.IOContext, namespaceName string) error](<#func-namespacecreate>)
- [func NamespaceExists(ioctx *rados.IOContext, namespaceName string) (bool, error)](<#func-namespaceexists>)
- [func NamespaceList(ioctx *rados.IOContext) (names []string, err error)](<#func-namespacelist>)
- [func NamespaceRemove(ioctx *rados.IOContext, namespaceName string) error](<#func-namespaceremove>)
- [func PoolInit(ioctx *rados.IOContext, force bool) error](<#func-poolinit>)
- [func RemoveImage(ioctx *rados.IOContext, name string) error](<#func-removeimage>)
- [func RemovePoolMetadata(ioctx *rados.IOContext, key string) error](<#func-removepoolmetadata>)
- [func SetMirrorMode(ioctx *rados.IOContext, mode MirrorMode) error](<#func-setmirrormode>)
- [func SetMirrorSiteName(conn *rados.Conn, name string) error](<#func-setmirrorsitename>)
- [func SetPoolMetadata(ioctx *rados.IOContext, key, value string) error](<#func-setpoolmetadata>)
- [func TrashRemove(ioctx *rados.IOContext, id string, force bool) error](<#func-trashremove>)
- [func TrashRestore(ioctx *rados.IOContext, id, name string) error](<#func-trashrestore>)
- [func Version() (int, int, int)](<#func-version>)
- [type DiffIncludeParent](<#type-diffincludeparent>)
- [type DiffIterateCallback](<#type-diffiteratecallback>)
- [type DiffIterateConfig](<#type-diffiterateconfig>)
- [type DiffWholeObject](<#type-diffwholeobject>)
- [type EncryptionAlgorithm](<#type-encryptionalgorithm>)
- [type EncryptionOptions](<#type-encryptionoptions>)
- [type EncryptionOptionsLUKS1](<#type-encryptionoptionsluks1>)
- [type EncryptionOptionsLUKS2](<#type-encryptionoptionsluks2>)
- [type FeatureSet](<#type-featureset>)
  - [func FeatureSetFromNames(names []string) FeatureSet](<#func-featuresetfromnames>)
  - [func (fs *FeatureSet) Names() []string](<#func-featureset-names>)
- [type GlobalMirrorImageIDAndStatus](<#type-globalmirrorimageidandstatus>)
  - [func MirrorImageGlobalStatusList(ioctx *rados.IOContext, start string, max int) ([]GlobalMirrorImageIDAndStatus, error)](<#func-mirrorimageglobalstatuslist>)
- [type GlobalMirrorImageStatus](<#type-globalmirrorimagestatus>)
  - [func (gmis GlobalMirrorImageStatus) LocalStatus() (SiteMirrorImageStatus, error)](<#func-globalmirrorimagestatus-localstatus>)
- [type GroupImageInfo](<#type-groupimageinfo>)
  - [func GroupImageList(ioctx *rados.IOContext, name string) ([]GroupImageInfo, error)](<#func-groupimagelist>)
- [type GroupImageState](<#type-groupimagestate>)
- [type GroupInfo](<#type-groupinfo>)
- [type GroupSnapInfo](<#type-groupsnapinfo>)
  - [func GroupSnapList(ioctx *rados.IOContext, group string) ([]GroupSnapInfo, error)](<#func-groupsnaplist>)
- [type GroupSnapRollbackCallback](<#type-groupsnaprollbackcallback>)
- [type GroupSnapState](<#type-groupsnapstate>)
- [type Image](<#type-image>)
  - [func Create(ioctx *rados.IOContext, name string, size uint64, order int, args ...uint64) (image *Image, err error)](<#func-create>)
  - [func Create2(ioctx *rados.IOContext, name string, size uint64, features uint64, order int) (image *Image, err error)](<#func-create2>)
  - [func Create3(ioctx *rados.IOContext, name string, size uint64, features uint64, order int, stripeUnit uint64, stripeCount uint64) (image *Image, err error)](<#func-create3>)
  - [func GetImage(ioctx *rados.IOContext, name string) *Image](<#func-getimage>)
  - [func OpenImage(ioctx *rados.IOContext, name, snapName string) (*Image, error)](<#func-openimage>)
  - [func OpenImageById(ioctx *rados.IOContext, id, snapName string) (*Image, error)](<#func-openimagebyid>)
  - [func OpenImageByIdReadOnly(ioctx *rados.IOContext, id, snapName string) (*Image, error)](<#func-openimagebyidreadonly>)
  - [func OpenImageReadOnly(ioctx *rados.IOContext, name, snapName string) (*Image, error)](<#func-openimagereadonly>)
  - [func (image *Image) BreakLock(client string, cookie string) error](<#func-image-breaklock>)
  - [func (image *Image) Clone(snapname string, cIoctx *rados.IOContext, cName string, features uint64, order int) (*Image, error)](<#func-image-clone>)
  - [func (image *Image) Close() error](<#func-image-close>)
  - [func (image *Image) Copy(ioctx *rados.IOContext, destname string) error](<#func-image-copy>)
  - [func (image *Image) Copy2(dest *Image) error](<#func-image-copy2>)
  - [func (image *Image) CreateMirrorSnapshot() (uint64, error)](<#func-image-createmirrorsnapshot>)
  - [func (image *Image) CreateSnapshot(snapname string) (*Snapshot, error)](<#func-image-createsnapshot>)
  - [func (image *Image) DeepCopy(ioctx *rados.IOContext, destname string, rio *ImageOptions) error](<#func-image-deepcopy>)
  - [func (image *Image) DiffIterate(config DiffIterateConfig) error](<#func-image-diffiterate>)
  - [func (image *Image) Discard(ofs uint64, length uint64) (int, error)](<#func-image-discard>)
  - [func (image *Image) EncryptionFormat(opts EncryptionOptions) error](<#func-image-encryptionformat>)
  - [func (image *Image) EncryptionLoad(opts EncryptionOptions) error](<#func-image-encryptionload>)
  - [func (image *Image) Flatten() error](<#func-image-flatten>)
  - [func (image *Image) Flush() error](<#func-image-flush>)
  - [func (image *Image) GetAccessTimestamp() (Timespec, error)](<#func-image-getaccesstimestamp>)
  - [func (image *Image) GetCreateTimestamp() (Timespec, error)](<#func-image-getcreatetimestamp>)
  - [func (image *Image) GetFeatures() (features uint64, err error)](<#func-image-getfeatures>)
  - [func (image *Image) GetGlobalMirrorStatus() (GlobalMirrorImageStatus, error)](<#func-image-getglobalmirrorstatus>)
  - [func (image *Image) GetGroup() (GroupInfo, error)](<#func-image-getgroup>)
  - [func (image *Image) GetId() (string, error)](<#func-image-getid>)
  - [func (image *Image) GetImageMirrorMode() (ImageMirrorMode, error)](<#func-image-getimagemirrormode>)
  - [func (image *Image) GetMetadata(key string) (string, error)](<#func-image-getmetadata>)
  - [func (image *Image) GetMirrorImageInfo() (*MirrorImageInfo, error)](<#func-image-getmirrorimageinfo>)
  - [func (image *Image) GetModifyTimestamp() (Timespec, error)](<#func-image-getmodifytimestamp>)
  - [func (image *Image) GetName() string](<#func-image-getname>)
  - [func (image *Image) GetOverlap() (overlap uint64, err error)](<#func-image-getoverlap>)
  - [func (image *Image) GetParent() (*ParentInfo, error)](<#func-image-getparent>)
  - [func (image *Image) GetParentInfo(pool, name, snapname []byte) error](<#func-image-getparentinfo>)
  - [func (image *Image) GetSize() (size uint64, err error)](<#func-image-getsize>)
  - [func (image *Image) GetSnapByID(snapID uint64) (string, error)](<#func-image-getsnapbyid>)
  - [func (image *Image) GetSnapID(snapName string) (uint64, error)](<#func-image-getsnapid>)
  - [func (image *Image) GetSnapNamespaceType(snapID uint64) (SnapNamespaceType, error)](<#func-image-getsnapnamespacetype>)
  - [func (image *Image) GetSnapTimestamp(snapID uint64) (Timespec, error)](<#func-image-getsnaptimestamp>)
  - [func (image *Image) GetSnapTrashNamespace(snapID uint64) (string, error)](<#func-image-getsnaptrashnamespace>)
  - [func (image *Image) GetSnapshot(snapname string) *Snapshot](<#func-image-getsnapshot>)
  - [func (image *Image) GetSnapshotNames() (snaps []SnapInfo, err error)](<#func-image-getsnapshotnames>)
  - [func (image *Image) GetStripeCount() (uint64, error)](<#func-image-getstripecount>)
  - [func (image *Image) GetStripeUnit() (uint64, error)](<#func-image-getstripeunit>)
  - [func (image *Image) IsOldFormat() (bool, error)](<#func-image-isoldformat>)
  - [func (image *Image) ListChildren() (pools []string, images []string, err error)](<#func-image-listchildren>)
  - [func (image *Image) ListLockers() (tag string, lockers []Locker, err error)](<#func-image-listlockers>)
  - [func (image *Image) ListMetadata() (map[string]string, error)](<#func-image-listmetadata>)
  - [func (image *Image) ListWatchers() ([]ImageWatcher, error)](<#func-image-listwatchers>)
  - [func (image *Image) LockExclusive(cookie string) error](<#func-image-lockexclusive>)
  - [func (image *Image) LockShared(cookie string, tag string) error](<#func-image-lockshared>)
  - [func (image *Image) MirrorDemote() error](<#func-image-mirrordemote>)
  - [func (image *Image) MirrorDisable(force bool) error](<#func-image-mirrordisable>)
  - [func (image *Image) MirrorEnable(mode ImageMirrorMode) error](<#func-image-mirrorenable>)
  - [func (image *Image) MirrorInstanceID() (string, error)](<#func-image-mirrorinstanceid>)
  - [func (image *Image) MirrorPromote(force bool) error](<#func-image-mirrorpromote>)
  - [func (image *Image) MirrorResync() error](<#func-image-mirrorresync>)
  - [func (image *Image) Open(args ...interface{}) error](<#func-image-open>)
  - [func (image *Image) Read(data []byte) (int, error)](<#func-image-read>)
  - [func (image *Image) ReadAt(data []byte, off int64) (int, error)](<#func-image-readat>)
  - [func (image *Image) Remove() error](<#func-image-remove>)
  - [func (image *Image) RemoveMetadata(key string) error](<#func-image-removemetadata>)
  - [func (image *Image) Rename(destname string) error](<#func-image-rename>)
  - [func (image *Image) Resize(size uint64) error](<#func-image-resize>)
  - [func (image *Image) Seek(offset int64, whence int) (int64, error)](<#func-image-seek>)
  - [func (image *Image) SetMetadata(key string, value string) error](<#func-image-setmetadata>)
  - [func (image *Image) SetSnapByID(snapID uint64) error](<#func-image-setsnapbyid>)
  - [func (image *Image) SetSnapshot(snapname string) error](<#func-image-setsnapshot>)
  - [func (image *Image) Sparsify(sparseSize uint) error](<#func-image-sparsify>)
  - [func (image *Image) Stat() (info *ImageInfo, err error)](<#func-image-stat>)
  - [func (image *Image) Trash(delay time.Duration) error](<#func-image-trash>)
  - [func (image *Image) Unlock(cookie string) error](<#func-image-unlock>)
  - [func (image *Image) UpdateFeatures(features uint64, enabled bool) error](<#func-image-updatefeatures>)
  - [func (image *Image) UpdateWatch(cb WatchCallback, data interface{}) (*Watch, error)](<#func-image-updatewatch>)
  - [func (image *Image) Write(data []byte) (n int, err error)](<#func-image-write>)
  - [func (image *Image) WriteAt(data []byte, off int64) (n int, err error)](<#func-image-writeat>)
  - [func (image *Image) WriteSame(ofs, n uint64, data []byte, flags rados.OpFlags) (int64, error)](<#func-image-writesame>)
- [type ImageInfo](<#type-imageinfo>)
- [type ImageMirrorMode](<#type-imagemirrormode>)
  - [func (imm ImageMirrorMode) String() string](<#func-imagemirrormode-string>)
- [type ImageMirrorModeFilter](<#type-imagemirrormodefilter>)
- [type ImageOption](<#type-imageoption>)
- [type ImageOptions](<#type-imageoptions>)
  - [func NewRbdImageOptions() *ImageOptions](<#func-newrbdimageoptions>)
  - [func (rio *ImageOptions) Clear()](<#func-imageoptions-clear>)
  - [func (rio *ImageOptions) Destroy()](<#func-imageoptions-destroy>)
  - [func (rio *ImageOptions) GetString(option ImageOption) (string, error)](<#func-imageoptions-getstring>)
  - [func (rio *ImageOptions) GetUint64(option ImageOption) (uint64, error)](<#func-imageoptions-getuint64>)
  - [func (rio *ImageOptions) IsEmpty() bool](<#func-imageoptions-isempty>)
  - [func (rio *ImageOptions) IsSet(option ImageOption) (bool, error)](<#func-imageoptions-isset>)
  - [func (rio *ImageOptions) SetString(option ImageOption, value string) error](<#func-imageoptions-setstring>)
  - [func (rio *ImageOptions) SetUint64(option ImageOption, value uint64) error](<#func-imageoptions-setuint64>)
  - [func (rio *ImageOptions) Unset(option ImageOption) error](<#func-imageoptions-unset>)
- [type ImageSpec](<#type-imagespec>)
- [type ImageWatcher](<#type-imagewatcher>)
- [type Locker](<#type-locker>)
- [type MirrorImageGlobalStatusIter](<#type-mirrorimageglobalstatusiter>)
  - [func NewMirrorImageGlobalStatusIter(ioctx *rados.IOContext) *MirrorImageGlobalStatusIter](<#func-newmirrorimageglobalstatusiter>)
  - [func (*MirrorImageGlobalStatusIter) Close() error](<#func-mirrorimageglobalstatusiter-close>)
  - [func (iter *MirrorImageGlobalStatusIter) Next() (*GlobalMirrorImageIDAndStatus, error)](<#func-mirrorimageglobalstatusiter-next>)
- [type MirrorImageInfo](<#type-mirrorimageinfo>)
- [type MirrorImageInfoItem](<#type-mirrorimageinfoitem>)
  - [func MirrorImageInfoList(ioctx *rados.IOContext, modeFilter ImageMirrorModeFilter, start string, max int) ([]MirrorImageInfoItem, error)](<#func-mirrorimageinfolist>)
- [type MirrorImageInfoIter](<#type-mirrorimageinfoiter>)
  - [func NewMirrorImageInfoIter(ioctx *rados.IOContext, modeFilter ImageMirrorModeFilter) *MirrorImageInfoIter](<#func-newmirrorimageinfoiter>)
  - [func (iter *MirrorImageInfoIter) Next() (*MirrorImageInfoItem, error)](<#func-mirrorimageinfoiter-next>)
- [type MirrorImageInstanceIDItem](<#type-mirrorimageinstanceiditem>)
  - [func MirrorImageInstanceIDList(ioctx *rados.IOContext, start string, max int) ([]MirrorImageInstanceIDItem, error)](<#func-mirrorimageinstanceidlist>)
- [type MirrorImageInstanceIDIter](<#type-mirrorimageinstanceiditer>)
  - [func NewMirrorImageInstanceIDIter(ioctx *rados.IOContext) *MirrorImageInstanceIDIter](<#func-newmirrorimageinstanceiditer>)
  - [func (iter *MirrorImageInstanceIDIter) Next() (*MirrorImageInstanceIDItem, error)](<#func-mirrorimageinstanceiditer-next>)
- [type MirrorImageState](<#type-mirrorimagestate>)
  - [func (mis MirrorImageState) String() string](<#func-mirrorimagestate-string>)
- [type MirrorImageStatusState](<#type-mirrorimagestatusstate>)
  - [func (state MirrorImageStatusState) String() (s string)](<#func-mirrorimagestatusstate-string>)
- [type MirrorMode](<#type-mirrormode>)
  - [func GetMirrorMode(ioctx *rados.IOContext) (MirrorMode, error)](<#func-getmirrormode>)
  - [func (m MirrorMode) String() string](<#func-mirrormode-string>)
- [type MirrorPeerDirection](<#type-mirrorpeerdirection>)
- [type ParentInfo](<#type-parentinfo>)
- [type PoolStatOption](<#type-poolstatoption>)
- [type RbdImageOption](<#type-rbdimageoption>)
- [type RbdImageOptions](<#type-rbdimageoptions>)
- [type SiteMirrorImageStatus](<#type-sitemirrorimagestatus>)
- [type SnapInfo](<#type-snapinfo>)
- [type SnapNamespaceType](<#type-snapnamespacetype>)
- [type SnapSpec](<#type-snapspec>)
- [type Snapshot](<#type-snapshot>)
  - [func (snapshot *Snapshot) IsProtected() (bool, error)](<#func-snapshot-isprotected>)
  - [func (snapshot *Snapshot) Protect() error](<#func-snapshot-protect>)
  - [func (snapshot *Snapshot) Remove() error](<#func-snapshot-remove>)
  - [func (snapshot *Snapshot) Rollback() error](<#func-snapshot-rollback>)
  - [func (snapshot *Snapshot) Set() error](<#func-snapshot-set>)
  - [func (snapshot *Snapshot) Unprotect() error](<#func-snapshot-unprotect>)
- [type Timespec](<#type-timespec>)
- [type TrashInfo](<#type-trashinfo>)
  - [func GetTrashList(ioctx *rados.IOContext) ([]TrashInfo, error)](<#func-gettrashlist>)
- [type Watch](<#type-watch>)
  - [func (w *Watch) Unwatch() error](<#func-watch-unwatch>)
- [type WatchCallback](<#type-watchcallback>)


## Constants

```go
const (
    // ExcludeParent will exclude the parent from the diff.
    ExcludeParent = DiffIncludeParent(0)
    // IncludeParent will include the parent in the diff.
    IncludeParent = DiffIncludeParent(1)

    // DisableWholeObject will not use the whole object in the diff.
    DisableWholeObject = DiffWholeObject(0)
    // EnableWholeObject will use the whole object in the diff.
    EnableWholeObject = DiffWholeObject(1)
)
```

Possible values for EncryptionAlgorithm: EncryptionAlgorithmAES128: AES 128bits EncryptionAlgorithmAES256: AES 256bits

```go
const (
    EncryptionAlgorithmAES128 = EncryptionAlgorithm(C.RBD_ENCRYPTION_ALGORITHM_AES128)
    EncryptionAlgorithmAES256 = EncryptionAlgorithm(C.RBD_ENCRYPTION_ALGORITHM_AES256)
)
```

```go
const (

    // FeatureLayering is the representation of RBD_FEATURE_LAYERING from
    // librbd
    FeatureLayering = uint64(C.RBD_FEATURE_LAYERING)

    // FeatureStripingV2 is the representation of RBD_FEATURE_STRIPINGV2
    // from librbd
    FeatureStripingV2 = uint64(C.RBD_FEATURE_STRIPINGV2)

    // FeatureExclusiveLock is the representation of
    // RBD_FEATURE_EXCLUSIVE_LOCK from librbd
    FeatureExclusiveLock = uint64(C.RBD_FEATURE_EXCLUSIVE_LOCK)

    // FeatureObjectMap is the representation of RBD_FEATURE_OBJECT_MAP
    // from librbd
    FeatureObjectMap = uint64(C.RBD_FEATURE_OBJECT_MAP)

    // FeatureFastDiff is the representation of RBD_FEATURE_FAST_DIFF from
    // librbd
    FeatureFastDiff = uint64(C.RBD_FEATURE_FAST_DIFF)

    // FeatureDeepFlatten is the representation of RBD_FEATURE_DEEP_FLATTEN
    // from librbd
    FeatureDeepFlatten = uint64(C.RBD_FEATURE_DEEP_FLATTEN)

    // FeatureJournaling is the representation of RBD_FEATURE_JOURNALING
    // from librbd
    FeatureJournaling = uint64(C.RBD_FEATURE_JOURNALING)

    // FeatureDataPool is the representation of RBD_FEATURE_DATA_POOL from
    // librbd
    FeatureDataPool = uint64(C.RBD_FEATURE_DATA_POOL)

    // FeatureOperations is the representation of RBD_FEATURE_OPERATIONS
    // from librbd
    FeatureOperations = uint64(C.RBD_FEATURE_OPERATIONS)

    // FeatureNameLayering is the representation of
    // RBD_FEATURE_NAME_LAYERING from librbd
    FeatureNameLayering = C.RBD_FEATURE_NAME_LAYERING

    // FeatureNameStripingV2 is the representation of
    // RBD_FEATURE_NAME_STRIPINGV2 from librbd
    FeatureNameStripingV2 = C.RBD_FEATURE_NAME_STRIPINGV2

    // FeatureNameExclusiveLock is the representation of
    // RBD_FEATURE_NAME_EXCLUSIVE_LOCK from librbd
    FeatureNameExclusiveLock = C.RBD_FEATURE_NAME_EXCLUSIVE_LOCK

    // FeatureNameObjectMap is the representation of
    // RBD_FEATURE_NAME_OBJECT_MAP from librbd
    FeatureNameObjectMap = C.RBD_FEATURE_NAME_OBJECT_MAP

    // FeatureNameFastDiff is the representation of
    // RBD_FEATURE_NAME_FAST_DIFF from librbd
    FeatureNameFastDiff = C.RBD_FEATURE_NAME_FAST_DIFF

    // FeatureNameDeepFlatten is the representation of
    // RBD_FEATURE_NAME_DEEP_FLATTEN from librbd
    FeatureNameDeepFlatten = C.RBD_FEATURE_NAME_DEEP_FLATTEN

    // FeatureNameJournaling is the representation of
    // RBD_FEATURE_NAME_JOURNALING from librbd
    FeatureNameJournaling = C.RBD_FEATURE_NAME_JOURNALING

    // FeatureNameDataPool is the representation of
    // RBD_FEATURE_NAME_DATA_POOL from librbd
    FeatureNameDataPool = C.RBD_FEATURE_NAME_DATA_POOL

    // FeatureNameOperations is the representation of
    // RBD_FEATURE_NAME_OPERATIONS from librbd
    FeatureNameOperations = C.RBD_FEATURE_NAME_OPERATIONS

    // RbdFeatureLayering deprecated alias for FeatureLayering
    RbdFeatureLayering = FeatureLayering
    // RbdFeatureStripingV2 deprecated alias for FeatureStripingV2
    RbdFeatureStripingV2 = FeatureStripingV2
    // RbdFeatureExclusiveLock deprecated alias for FeatureExclusiveLock
    RbdFeatureExclusiveLock = FeatureExclusiveLock
    // RbdFeatureObjectMap deprecated alias for FeatureObjectMap
    RbdFeatureObjectMap = FeatureObjectMap
    // RbdFeatureFastDiff deprecated alias for FeatureFastDiff
    RbdFeatureFastDiff = FeatureFastDiff
    // RbdFeatureDeepFlatten deprecated alias for FeatureDeepFlatten
    RbdFeatureDeepFlatten = FeatureDeepFlatten
    // RbdFeatureJournaling deprecated alias for FeatureJournaling
    RbdFeatureJournaling = FeatureJournaling
    // RbdFeatureDataPool deprecated alias for FeatureDataPool
    RbdFeatureDataPool = FeatureDataPool

    // revive:disable:exported Maybe unused
    // the following are probably really unused?
    RbdFeaturesDefault        = uint64(C.RBD_FEATURES_DEFAULT)
    RbdFeaturesIncompatible   = uint64(C.RBD_FEATURES_INCOMPATIBLE)
    RbdFeaturesRwIncompatible = uint64(C.RBD_FEATURES_RW_INCOMPATIBLE)
    RbdFeaturesMutable        = uint64(C.RBD_FEATURES_MUTABLE)
    RbdFeaturesSingleClient   = uint64(C.RBD_FEATURES_SINGLE_CLIENT)
)
```

```go
const (
    // FeatureMigrating is the representation of RBD_FEATURE_MIGRATING from
    // librbd
    FeatureMigrating = uint64(C.RBD_FEATURE_MIGRATING)

    // FeatureNameMigrating is the representation of
    // RBD_FEATURE_NAME_MIGRATING from librbd
    FeatureNameMigrating = C.RBD_FEATURE_NAME_MIGRATING
)
```

```go
const (
    // GroupImageStateAttached is equivalent to RBD_GROUP_IMAGE_STATE_ATTACHED
    GroupImageStateAttached = GroupImageState(C.RBD_GROUP_IMAGE_STATE_ATTACHED)
    // GroupImageStateIncomplete is equivalent to RBD_GROUP_IMAGE_STATE_INCOMPLETE
    GroupImageStateIncomplete = GroupImageState(C.RBD_GROUP_IMAGE_STATE_INCOMPLETE)
)
```

```go
const (
    // GroupSnapStateIncomplete is equivalent to RBD_GROUP_SNAP_STATE_INCOMPLETE.
    GroupSnapStateIncomplete = GroupSnapState(C.RBD_GROUP_SNAP_STATE_INCOMPLETE)
    // GroupSnapStateComplete is equivalent to RBD_GROUP_SNAP_STATE_COMPLETE.
    GroupSnapStateComplete = GroupSnapState(C.RBD_GROUP_SNAP_STATE_COMPLETE)
)
```

```go
const (
    // MirrorModeDisabled disables mirroring.
    MirrorModeDisabled = MirrorMode(C.RBD_MIRROR_MODE_DISABLED)
    // MirrorModeImage enables mirroring on a per-image basis.
    MirrorModeImage = MirrorMode(C.RBD_MIRROR_MODE_IMAGE)
    // MirrorModePool enables mirroring on all journaled images.
    MirrorModePool = MirrorMode(C.RBD_MIRROR_MODE_POOL)
)
```

```go
const (
    // ImageMirrorModeJournal uses journaling to propagate RBD images between
    // ceph clusters.
    ImageMirrorModeJournal = ImageMirrorMode(C.RBD_MIRROR_IMAGE_MODE_JOURNAL)
    // ImageMirrorModeSnapshot uses snapshots to propagate RBD images between
    // ceph clusters.
    ImageMirrorModeSnapshot = ImageMirrorMode(C.RBD_MIRROR_IMAGE_MODE_SNAPSHOT)
)
```

```go
const (
    // MirrorImageDisabling is the representation of
    // RBD_MIRROR_IMAGE_DISABLING from librbd.
    MirrorImageDisabling = MirrorImageState(C.RBD_MIRROR_IMAGE_DISABLING)
    // MirrorImageEnabled is the representation of
    // RBD_MIRROR_IMAGE_ENABLED from librbd.
    MirrorImageEnabled = MirrorImageState(C.RBD_MIRROR_IMAGE_ENABLED)
    // MirrorImageDisabled is the representation of
    // RBD_MIRROR_IMAGE_DISABLED from librbd.
    MirrorImageDisabled = MirrorImageState(C.RBD_MIRROR_IMAGE_DISABLED)
)
```

```go
const (
    // MirrorImageStatusStateUnknown is equivalent to MIRROR_IMAGE_STATUS_STATE_UNKNOWN
    MirrorImageStatusStateUnknown = MirrorImageStatusState(C.MIRROR_IMAGE_STATUS_STATE_UNKNOWN)
    // MirrorImageStatusStateError is equivalent to MIRROR_IMAGE_STATUS_STATE_ERROR
    MirrorImageStatusStateError = MirrorImageStatusState(C.MIRROR_IMAGE_STATUS_STATE_ERROR)
    // MirrorImageStatusStateSyncing is equivalent to MIRROR_IMAGE_STATUS_STATE_SYNCING
    MirrorImageStatusStateSyncing = MirrorImageStatusState(C.MIRROR_IMAGE_STATUS_STATE_SYNCING)
    // MirrorImageStatusStateStartingReplay is equivalent to MIRROR_IMAGE_STATUS_STATE_STARTING_REPLAY
    MirrorImageStatusStateStartingReplay = MirrorImageStatusState(C.MIRROR_IMAGE_STATUS_STATE_STARTING_REPLAY)
    // MirrorImageStatusStateReplaying is equivalent to MIRROR_IMAGE_STATUS_STATE_REPLAYING
    MirrorImageStatusStateReplaying = MirrorImageStatusState(C.MIRROR_IMAGE_STATUS_STATE_REPLAYING)
    // MirrorImageStatusStateStoppingReplay is equivalent to MIRROR_IMAGE_STATUS_STATE_STOPPING_REPLAY
    MirrorImageStatusStateStoppingReplay = MirrorImageStatusState(C.MIRROR_IMAGE_STATUS_STATE_STOPPING_REPLAY)
    // MirrorImageStatusStateStopped is equivalent to MIRROR_IMAGE_STATUS_STATE_STOPPED
    MirrorImageStatusStateStopped = MirrorImageStatusState(C.MIRROR_IMAGE_STATUS_STATE_STOPPED)
)
```

```go
const (
    // MirrorPeerDirectionRx is equivalent to RBD_MIRROR_PEER_DIRECTION_RX
    MirrorPeerDirectionRx = MirrorPeerDirection(C.RBD_MIRROR_PEER_DIRECTION_RX)
    // MirrorPeerDirectionTx is equivalent to RBD_MIRROR_PEER_DIRECTION_TX
    MirrorPeerDirectionTx = MirrorPeerDirection(C.RBD_MIRROR_PEER_DIRECTION_TX)
    // MirrorPeerDirectionRxTx is equivalent to RBD_MIRROR_PEER_DIRECTION_RX_TX
    MirrorPeerDirectionRxTx = MirrorPeerDirection(C.RBD_MIRROR_PEER_DIRECTION_RX_TX)
)
```

```go
const (

    // ImageOptionFormat is the representation of RBD_IMAGE_OPTION_FORMAT from
    // librbd
    ImageOptionFormat = C.RBD_IMAGE_OPTION_FORMAT
    // ImageOptionFeatures is the representation of RBD_IMAGE_OPTION_FEATURES
    // from librbd
    ImageOptionFeatures = C.RBD_IMAGE_OPTION_FEATURES
    // ImageOptionOrder is the representation of RBD_IMAGE_OPTION_ORDER from
    // librbd
    ImageOptionOrder = C.RBD_IMAGE_OPTION_ORDER
    // ImageOptionStripeUnit is the representation of
    // RBD_IMAGE_OPTION_STRIPE_UNIT from librbd
    ImageOptionStripeUnit = C.RBD_IMAGE_OPTION_STRIPE_UNIT
    // ImageOptionStripeCount is the representation of
    // RBD_IMAGE_OPTION_STRIPE_COUNT from librbd
    ImageOptionStripeCount = C.RBD_IMAGE_OPTION_STRIPE_COUNT
    // ImageOptionJournalOrder is the representation of
    // RBD_IMAGE_OPTION_JOURNAL_ORDER from librbd
    ImageOptionJournalOrder = C.RBD_IMAGE_OPTION_JOURNAL_ORDER
    // ImageOptionJournalSplayWidth is the representation of
    // RBD_IMAGE_OPTION_JOURNAL_SPLAY_WIDTH from librbd
    ImageOptionJournalSplayWidth = C.RBD_IMAGE_OPTION_JOURNAL_SPLAY_WIDTH
    // ImageOptionJournalPool is the representation of
    // RBD_IMAGE_OPTION_JOURNAL_POOL from librbd
    ImageOptionJournalPool = C.RBD_IMAGE_OPTION_JOURNAL_POOL
    // ImageOptionFeaturesSet is the representation of
    // RBD_IMAGE_OPTION_FEATURES_SET from librbd
    ImageOptionFeaturesSet = C.RBD_IMAGE_OPTION_FEATURES_SET
    // ImageOptionFeaturesClear is the representation of
    // RBD_IMAGE_OPTION_FEATURES_CLEAR from librbd
    ImageOptionFeaturesClear = C.RBD_IMAGE_OPTION_FEATURES_CLEAR
    // ImageOptionDataPool is the representation of RBD_IMAGE_OPTION_DATA_POOL
    // from librbd
    ImageOptionDataPool = C.RBD_IMAGE_OPTION_DATA_POOL
    // ImageOptionFlatten is the representation of RBD_IMAGE_OPTION_FLATTEN
    // from librbd
    ImageOptionFlatten = C.RBD_IMAGE_OPTION_FLATTEN
    // ImageOptionCloneFormat is the representation of
    // RBD_IMAGE_OPTION_CLONE_FORMAT from librbd
    ImageOptionCloneFormat = C.RBD_IMAGE_OPTION_CLONE_FORMAT

    // RbdImageOptionFormat deprecated alias for ImageOptionFormat
    RbdImageOptionFormat = ImageOptionFormat
    // RbdImageOptionFeatures deprecated alias for ImageOptionFeatures
    RbdImageOptionFeatures = ImageOptionFeatures
    // RbdImageOptionOrder deprecated alias for ImageOptionOrder
    RbdImageOptionOrder = ImageOptionOrder
    // RbdImageOptionStripeUnit deprecated alias for ImageOptionStripeUnit
    RbdImageOptionStripeUnit = ImageOptionStripeUnit
    // RbdImageOptionStripeCount deprecated alias for ImageOptionStripeCount
    RbdImageOptionStripeCount = ImageOptionStripeCount
    // RbdImageOptionJournalOrder deprecated alias for ImageOptionJournalOrder
    RbdImageOptionJournalOrder = ImageOptionJournalOrder
    // RbdImageOptionJournalSplayWidth deprecated alias for
    RbdImageOptionJournalSplayWidth = ImageOptionJournalSplayWidth
    // RbdImageOptionJournalPool deprecated alias for ImageOptionJournalPool
    RbdImageOptionJournalPool = ImageOptionJournalPool
    // RbdImageOptionFeaturesSet deprecated alias for ImageOptionFeaturesSet
    RbdImageOptionFeaturesSet = ImageOptionFeaturesSet
    // RbdImageOptionFeaturesClear deprecated alias for ImageOptionFeaturesClear
    RbdImageOptionFeaturesClear = ImageOptionFeaturesClear
    // RbdImageOptionDataPool deprecated alias for ImageOptionDataPool
    RbdImageOptionDataPool = ImageOptionDataPool
)
```

```go
const (
    // PoolStatOptionImages is the representation of
    // RBD_POOL_STAT_OPTION_IMAGES from librbd.
    PoolStatOptionImages = PoolStatOption(C.RBD_POOL_STAT_OPTION_IMAGES)
    // PoolStatOptionImageProvisionedBytes is the representation of
    // RBD_POOL_STAT_OPTION_IMAGE_PROVISIONED_BYTES from librbd.
    PoolStatOptionImageProvisionedBytes = PoolStatOption(C.RBD_POOL_STAT_OPTION_IMAGE_PROVISIONED_BYTES)
    // PoolStatOptionImageMaxProvisionedBytes is the representation of
    // RBD_POOL_STAT_OPTION_IMAGE_MAX_PROVISIONED_BYTES from librbd.
    PoolStatOptionImageMaxProvisionedBytes = PoolStatOption(C.RBD_POOL_STAT_OPTION_IMAGE_MAX_PROVISIONED_BYTES)
    // PoolStatOptionImageSnapshots is the representation of
    // RBD_POOL_STAT_OPTION_IMAGE_SNAPSHOTS from librbd.
    PoolStatOptionImageSnapshots = PoolStatOption(C.RBD_POOL_STAT_OPTION_IMAGE_SNAPSHOTS)
    // PoolStatOptionTrashImages is the representation of
    // RBD_POOL_STAT_OPTION_TRASH_IMAGES from librbd.
    PoolStatOptionTrashImages = PoolStatOption(C.RBD_POOL_STAT_OPTION_TRASH_IMAGES)
    // PoolStatOptionTrashProvisionedBytes is the representation of
    // RBD_POOL_STAT_OPTION_TRASH_PROVISIONED_BYTES from librbd.
    PoolStatOptionTrashProvisionedBytes = PoolStatOption(C.RBD_POOL_STAT_OPTION_TRASH_PROVISIONED_BYTES)
    // PoolStatOptionTrashMaxProvisionedBytes is the representation of
    // RBD_POOL_STAT_OPTION_TRASH_MAX_PROVISIONED_BYTES from librbd.
    PoolStatOptionTrashMaxProvisionedBytes = PoolStatOption(C.RBD_POOL_STAT_OPTION_TRASH_MAX_PROVISIONED_BYTES)
    // PoolStatOptionTrashSnapshots is the representation of
    // RBD_POOL_STAT_OPTION_TRASH_SNAPSHOTS from librbd.
    PoolStatOptionTrashSnapshots = PoolStatOption(C.RBD_POOL_STAT_OPTION_TRASH_SNAPSHOTS)
)
```

```go
const (

    // SeekSet is used with Seek to absolutely position the file.
    SeekSet = int(C.SEEK_SET)
    // SeekCur is used with Seek to position the file relatively to the current
    // position.
    SeekCur = int(C.SEEK_CUR)
    // SeekEnd is used with Seek to position the file relatively to the end.
    SeekEnd = int(C.SEEK_END)
)
```

```go
const (
    // SnapNamespaceTypeUser indicates that the snapshot belongs to user namespace.
    SnapNamespaceTypeUser = SnapNamespaceType(C.RBD_SNAP_NAMESPACE_TYPE_USER)

    // SnapNamespaceTypeGroup indicates that the snapshot belongs to group namespace.
    // Such snapshots will have associated group information.
    SnapNamespaceTypeGroup = SnapNamespaceType(C.RBD_SNAP_NAMESPACE_TYPE_GROUP)

    // SnapNamespaceTypeTrash indicates that the snapshot belongs to trash namespace.
    SnapNamespaceTypeTrash = SnapNamespaceType(C.RBD_SNAP_NAMESPACE_TYPE_TRASH)
)
```

Public general error

```go
const (
    // ErrNotExist indicates a non-specific missing resource.
    ErrNotExist = rbdError(-C.ENOENT)
)
```

```go
const (
    // ImageOptionMirrorImageMode is the representation of
    // RBD_IMAGE_OPTION_MIRROR_IMAGE_MODE from librbd
    ImageOptionMirrorImageMode = C.RBD_IMAGE_OPTION_MIRROR_IMAGE_MODE
)
```

bits for Image\.validate\(\) and Snapshot\.validate\(\)

```go
const (

    // NoSnapshot indicates that no snapshot name is in use (see OpenImage)
    NoSnapshot = ""
)
```

## Variables

```go
var (
    // ErrNoIOContext may be returned if an api call requires an IOContext and
    // it is not provided.
    ErrNoIOContext = errors.New("IOContext is missing")
    // ErrNoName may be returned if an api call requires a name and it is
    // not provided.
    ErrNoName = errors.New("RBD image does not have a name")
    // ErrSnapshotNoName may be returned if an api call requires a snapshot
    // name and it is not provided.
    ErrSnapshotNoName = errors.New("RBD snapshot does not have a name")
    // ErrImageNotOpen may be returned if an api call requires an open image handle and one is not provided.
    ErrImageNotOpen = errors.New("RBD image not open")
    // ErrImageIsOpen may be returned if an api call requires a closed image handle and one is not provided.
    ErrImageIsOpen = errors.New("RBD image is open")
    // ErrNotFound may be returned from an api call when the requested item is
    // missing.
    ErrNotFound = errors.New("RBD image not found")
    // ErrNoNamespaceName maye be returned if an api call requires a namespace
    // name and it is not provided.
    ErrNoNamespaceName = errors.New("Namespace value is missing")

    // revive:disable:exported for compatibility with old versions
    RbdErrorImageNotOpen = ErrImageNotOpen
    RbdErrorNotFound     = ErrNotFound
)
```

## func [CloneFromImage](<https://github.com/ceph/go-ceph/blob/master/rbd/rbd.go#L1279-L1280>)

```go
func CloneFromImage(parent *Image, snapName string, destctx *rados.IOContext, name string, rio *ImageOptions) error
```

CloneFromImage creates a clone of the image from the named snapshot in the provided io\-context with the given name and image options\. This function is a convenience wrapper around CloneImage to support cloning from an existing Image\.

## func [CloneImage](<https://github.com/ceph/go-ceph/blob/master/rbd/rbd.go#L1251-L1252>)

```go
func CloneImage(ioctx *rados.IOContext, parentName, snapName string, destctx *rados.IOContext, name string, rio *ImageOptions) error
```

CloneImage creates a clone of the image from the named snapshot in the provided io\-context with the given name and image options\.

Implements: int rbd\_clone3\(rados\_ioctx\_t p\_ioctx\, const char \*p\_name\, const char \*p\_snapname\, rados\_ioctx\_t c\_ioctx\, const char \*c\_name\, rbd\_image\_options\_t c\_opts\);

## func [CreateImage](<https://github.com/ceph/go-ceph/blob/master/rbd/rbd.go#L1208>)

```go
func CreateImage(ioctx *rados.IOContext, name string, size uint64, rio *ImageOptions) error
```

CreateImage creates a new rbd image using provided image options\.

Implements: int rbd\_create4\(rados\_ioctx\_t io\, const char \*name\, uint64\_t size\, rbd\_image\_options\_t opts\);

## func [CreateMirrorPeerBootstrapToken](<https://github.com/ceph/go-ceph/blob/master/rbd/mirror.go#L572>)

```go
func CreateMirrorPeerBootstrapToken(ioctx *rados.IOContext) (string, error)
```

CreateMirrorPeerBootstrapToken returns a token value\, representing the cluster and pool associated with the given IO context\,  that can be provided to ImportMirrorPeerBootstrapToken in order to set up mirroring between pools\.

Implements: int rbd\_mirror\_peer\_bootstrap\_create\( rados\_ioctx\_t io\_ctx\, char \*token\, size\_t \*max\_len\);

## func [GetAllPoolStats](<https://github.com/ceph/go-ceph/blob/master/rbd/pool_nautilus.go#L175>)

```go
func GetAllPoolStats(ioctx *rados.IOContext) (map[PoolStatOption]uint64, error)
```

GetAllPoolStats returns a map of all PoolStatOption\(s\) to their respective values\.

Implements: int rbd\_pool\_stats\_get\(rados\_ioctx\_t io\, rbd\_pool\_stats\_t stats\);

## func [GetImageNames](<https://github.com/ceph/go-ceph/blob/master/rbd/rbd_nautilus.go#L22>)

```go
func GetImageNames(ioctx *rados.IOContext) ([]string, error)
```

GetImageNames returns the list of current RBD images\.

## func [GetMirrorSiteName](<https://github.com/ceph/go-ceph/blob/master/rbd/mirror.go#L539>)

```go
func GetMirrorSiteName(conn *rados.Conn) (string, error)
```

GetMirrorSiteName gets the site name\, used for rbd mirroring\, for the ceph cluster associated with the provided rados connection\.

Implements: int rbd\_mirror\_site\_name\_get\(rados\_t cluster\, char \*name\, size\_t \*max\_len\);

## func [GetMirrorUUID](<https://github.com/ceph/go-ceph/blob/master/rbd/mirror.go#L91>)

```go
func GetMirrorUUID(ioctx *rados.IOContext) (string, error)
```

GetMirrorUUID returns a string naming the mirroring uuid for the pool associated with the ioctx\.

Implements: int rbd\_mirror\_uuid\_get\(rados\_ioctx\_t io\_ctx\, char \*uuid\, size\_t \*max\_len\);

## func [GetPoolMetadata](<https://github.com/ceph/go-ceph/blob/master/rbd/pool_nautilus.go#L24>)

```go
func GetPoolMetadata(ioctx *rados.IOContext, key string) (string, error)
```

GetPoolMetadata returns pool metadata associated with the given key\.

Implements: int rbd\_pool\_metadata\_get\(rados\_ioctx\_t io\_ctx\, const char \*key\, char \*value\, size\_t \*val\_len\);

## func [GroupCreate](<https://github.com/ceph/go-ceph/blob/master/rbd/group.go#L22>)

```go
func GroupCreate(ioctx *rados.IOContext, name string) error
```

GroupCreate is used to create an image group\.

Implements: int rbd\_group\_create\(rados\_ioctx\_t p\, const char \*name\);

## func [GroupImageAdd](<https://github.com/ceph/go-ceph/blob/master/rbd/group.go#L96-L97>)

```go
func GroupImageAdd(groupIoctx *rados.IOContext, groupName string, imageIoctx *rados.IOContext, imageName string) error
```

GroupImageAdd will add the specified image to the named group\. An io context must be supplied for both the group and image\.

Implements: int rbd\_group\_image\_add\(rados\_ioctx\_t group\_p\, const char \*group\_name\, rados\_ioctx\_t image\_p\, const char \*image\_name\);

## func [GroupImageRemove](<https://github.com/ceph/go-ceph/blob/master/rbd/group.go#L120-L121>)

```go
func GroupImageRemove(groupIoctx *rados.IOContext, groupName string, imageIoctx *rados.IOContext, imageName string) error
```

GroupImageRemove will remove the specified image from the named group\. An io context must be supplied for both the group and image\.

Implements: int rbd\_group\_image\_remove\(rados\_ioctx\_t group\_p\, const char \*group\_name\, rados\_ioctx\_t image\_p\, const char \*image\_name\);

## func [GroupImageRemoveByID](<https://github.com/ceph/go-ceph/blob/master/rbd/group.go#L144-L145>)

```go
func GroupImageRemoveByID(groupIoctx *rados.IOContext, groupName string, imageIoctx *rados.IOContext, imageID string) error
```

GroupImageRemoveByID will remove the specified image from the named group\. An io context must be supplied for both the group and image\.

Implements: CEPH\_RBD\_API int rbd\_group\_image\_remove\_by\_id\(rados\_ioctx\_t group\_p\, const char \*group\_name\, rados\_ioctx\_t image\_p\, const char \*image\_id\);

## func [GroupList](<https://github.com/ceph/go-ceph/blob/master/rbd/group.go#L61>)

```go
func GroupList(ioctx *rados.IOContext) ([]string, error)
```

GroupList returns a slice of image group names\.

Implements: int rbd\_group\_list\(rados\_ioctx\_t p\, char \*names\, size\_t \*size\);

## func [GroupRemove](<https://github.com/ceph/go-ceph/blob/master/rbd/group.go#L34>)

```go
func GroupRemove(ioctx *rados.IOContext, name string) error
```

GroupRemove is used to remove an image group\.

Implements: int rbd\_group\_remove\(rados\_ioctx\_t p\, const char \*name\);

## func [GroupRename](<https://github.com/ceph/go-ceph/blob/master/rbd/group.go#L47>)

```go
func GroupRename(ioctx *rados.IOContext, src, dest string) error
```

GroupRename will rename an existing image group\.

Implements: int rbd\_group\_rename\(rados\_ioctx\_t p\, const char \*src\_name\, const char \*dest\_name\);

## func [GroupSnapCreate](<https://github.com/ceph/go-ceph/blob/master/rbd/group_snap.go#L35>)

```go
func GroupSnapCreate(ioctx *rados.IOContext, group, snap string) error
```

GroupSnapCreate will create a group snapshot\.

Implements: int rbd\_group\_snap\_create\(rados\_ioctx\_t group\_p\, const char \*group\_name\, const char \*snap\_name\);

## func [GroupSnapRemove](<https://github.com/ceph/go-ceph/blob/master/rbd/group_snap.go#L51>)

```go
func GroupSnapRemove(ioctx *rados.IOContext, group, snap string) error
```

GroupSnapRemove removes an existing group snapshot\.

Implements: int rbd\_group\_snap\_remove\(rados\_ioctx\_t group\_p\, const char \*group\_name\, const char \*snap\_name\);

## func [GroupSnapRename](<https://github.com/ceph/go-ceph/blob/master/rbd/group_snap.go#L68>)

```go
func GroupSnapRename(ioctx *rados.IOContext, group, src, dest string) error
```

GroupSnapRename will rename an existing group snapshot\.

Implements: int rbd\_group\_snap\_rename\(rados\_ioctx\_t group\_p\, const char \*group\_name\, const char \*old\_snap\_name\, const char \*new\_snap\_name\);

## func [GroupSnapRollback](<https://github.com/ceph/go-ceph/blob/master/rbd/group_snap.go#L153>)

```go
func GroupSnapRollback(ioctx *rados.IOContext, group, snap string) error
```

GroupSnapRollback will roll back the images in the group to that of the given snapshot\.

Implements: int rbd\_group\_snap\_rollback\(rados\_ioctx\_t group\_p\, const char \*group\_name\, const char \*snap\_name\);

## func [GroupSnapRollbackWithProgress](<https://github.com/ceph/go-ceph/blob/master/rbd/group_snap.go#L182-L184>)

```go
func GroupSnapRollbackWithProgress(ioctx *rados.IOContext, group, snap string, cb GroupSnapRollbackCallback, data interface{}) error
```

GroupSnapRollbackWithProgress will roll back the images in the group to that of given snapshot\. The given progress callback will be called to report on the progress of the snapshot rollback\.

Implements: int rbd\_group\_snap\_rollback\_with\_progress\(rados\_ioctx\_t group\_p\, const char \*group\_name\, const char \*snap\_name\, librbd\_progress\_fn\_t cb\, void \*cbdata\);

## func [ImportMirrorPeerBootstrapToken](<https://github.com/ceph/go-ceph/blob/master/rbd/mirror.go#L617-L618>)

```go
func ImportMirrorPeerBootstrapToken(ioctx *rados.IOContext, direction MirrorPeerDirection, token string) error
```

ImportMirrorPeerBootstrapToken applies the provided bootstrap token to the pool associated with the IO context to create a mirroring relationship between pools\. The direction parameter controls if data in the pool is a source\, destination\, or both\.

Implements: int rbd\_mirror\_peer\_bootstrap\_import\( rados\_ioctx\_t io\_ctx\, rbd\_mirror\_peer\_direction\_t direction\, const char \*token\);

## func [MirrorImageStatusSummary](<https://github.com/ceph/go-ceph/blob/master/rbd/mirror.go#L478-L479>)

```go
func MirrorImageStatusSummary(ioctx *rados.IOContext) (map[MirrorImageStatusState]uint, error)
```

MirrorImageStatusSummary returns a map of images statuses and the count of images with said status\.

Implements: int rbd\_mirror\_image\_status\_summary\( rados\_ioctx\_t io\_ctx\, rbd\_mirror\_image\_status\_state\_t \*states\, int \*counts\, size\_t \*maxlen\);

## func [NamespaceCreate](<https://github.com/ceph/go-ceph/blob/master/rbd/namespace_nautilus.go#L26>)

```go
func NamespaceCreate(ioctx *rados.IOContext, namespaceName string) error
```

NamespaceCreate creates the namespace for a given Rados IOContext\.

Implements: int rbd\_namespace\_create\(rados\_ioctx\_t io\, const char \*namespace\_name\);

## func [NamespaceExists](<https://github.com/ceph/go-ceph/blob/master/rbd/namespace_nautilus.go#L62>)

```go
func NamespaceExists(ioctx *rados.IOContext, namespaceName string) (bool, error)
```

NamespaceExists checks whether a given namespace exists or not\.

Implements: int rbd\_namespace\_exists\(rados\_ioctx\_t io\, const char \*namespace\_name\, bool \*exists\);

## func [NamespaceList](<https://github.com/ceph/go-ceph/blob/master/rbd/namespace_nautilus.go#L81>)

```go
func NamespaceList(ioctx *rados.IOContext) (names []string, err error)
```

NamespaceList returns a slice containing the names of existing rbd namespaces\.

Implements: int rbd\_namespace\_list\(rados\_ioctx\_t io\, char \*namespace\_names\, size\_t \*size\);

## func [NamespaceRemove](<https://github.com/ceph/go-ceph/blob/master/rbd/namespace_nautilus.go#L44>)

```go
func NamespaceRemove(ioctx *rados.IOContext, namespaceName string) error
```

NamespaceRemove removes a given namespace\.

Implements: int rbd\_namespace\_remove\(rados\_ioctx\_t io\, const char \*namespace\_name\);

## func [PoolInit](<https://github.com/ceph/go-ceph/blob/master/rbd/pool_nautilus.go#L93>)

```go
func PoolInit(ioctx *rados.IOContext, force bool) error
```

PoolInit initializes a pool for use by rbd\. This function does not create new pools\, rather it prepares the pool to host rbd images\.

Implements: int rbd\_pool\_init\(rados\_ioctx\_t io\, bool force\)

## func [RemoveImage](<https://github.com/ceph/go-ceph/blob/master/rbd/rbd.go#L1231>)

```go
func RemoveImage(ioctx *rados.IOContext, name string) error
```

RemoveImage removes the specified rbd image\.

Implements: int rbd\_remove\(rados\_ioctx\_t io\, const char \*name\);

## func [RemovePoolMetadata](<https://github.com/ceph/go-ceph/blob/master/rbd/pool_nautilus.go#L75>)

```go
func RemovePoolMetadata(ioctx *rados.IOContext, key string) error
```

RemovePoolMetadata removes the pool metadata value for a given pool metadata key\.

Implements: int rbd\_pool\_metadata\_remove\(rados\_ioctx\_t io\_ctx\, const char \*key\)

## func [SetMirrorMode](<https://github.com/ceph/go-ceph/blob/master/rbd/mirror.go#L119>)

```go
func SetMirrorMode(ioctx *rados.IOContext, mode MirrorMode) error
```

SetMirrorMode is used to enable or disable pool level mirroring with either an automatic or per\-image behavior\.

Implements: int rbd\_mirror\_mode\_set\(rados\_ioctx\_t io\_ctx\, rbd\_mirror\_mode\_t mirror\_mode\);

## func [SetMirrorSiteName](<https://github.com/ceph/go-ceph/blob/master/rbd/mirror.go#L523>)

```go
func SetMirrorSiteName(conn *rados.Conn, name string) error
```

SetMirrorSiteName sets the site name\, used for rbd mirroring\, for the ceph cluster associated with the provided rados connection\.

Implements: int rbd\_mirror\_site\_name\_set\(rados\_t cluster\, const char \*name\);

## func [SetPoolMetadata](<https://github.com/ceph/go-ceph/blob/master/rbd/pool_nautilus.go#L57>)

```go
func SetPoolMetadata(ioctx *rados.IOContext, key, value string) error
```

SetPoolMetadata updates the pool metadata string associated with the given key\.

Implements: int rbd\_pool\_metadata\_set\(rados\_ioctx\_t io\_ctx\, const char \*key\, const char \*value\);

## func [TrashRemove](<https://github.com/ceph/go-ceph/blob/master/rbd/rbd.go#L1013>)

```go
func TrashRemove(ioctx *rados.IOContext, id string, force bool) error
```

TrashRemove permanently deletes the trashed RBD with the specified id\.

## func [TrashRestore](<https://github.com/ceph/go-ceph/blob/master/rbd/rbd.go#L1022>)

```go
func TrashRestore(ioctx *rados.IOContext, id, name string) error
```

TrashRestore restores the trashed RBD with the specified id back to the pool from whence it came\, with the specified new name\.

## func [Version](<https://github.com/ceph/go-ceph/blob/master/rbd/rbd.go#L131>)

```go
func Version() (int, int, int)
```

Version returns the major\, minor\, and patch level of the librbd library\.

## type [DiffIncludeParent](<https://github.com/ceph/go-ceph/blob/master/rbd/diff_iterate.go#L32>)

DiffIncludeParent values control if the difference should include the parent image\.

```go
type DiffIncludeParent uint8
```

## type [DiffIterateCallback](<https://github.com/ceph/go-ceph/blob/master/rbd/diff_iterate.go#L50>)

DiffIterateCallback defines the function signature needed for the DiffIterate callback\.

The function will be called with the arguments: offset\, length\, exists\, and data\. The offset and length correspond to the changed region of the image\. The exists value is set to zero if the region is known to be zeros\, otherwise it is set to 1\. The data value is the extra data parameter that was set on the DiffIterateConfig and is meant to be used for passing arbitrary user\-defined items to the callback function\.

The callback can trigger the iteration to terminate early by returning a non\-zero error code\.

```go
type DiffIterateCallback func(uint64, uint64, int, interface{}) int
```

## type [DiffIterateConfig](<https://github.com/ceph/go-ceph/blob/master/rbd/diff_iterate.go#L55-L63>)

DiffIterateConfig is used to define the parameters of a DiffIterate call\. Callback\, Offset\, and Length should always be specified when passed to DiffIterate\. The other values are optional\.

```go
type DiffIterateConfig struct {
    SnapName      string
    Offset        uint64
    Length        uint64
    IncludeParent DiffIncludeParent
    WholeObject   DiffWholeObject
    Callback      DiffIterateCallback
    Data          interface{}
}
```

## type [DiffWholeObject](<https://github.com/ceph/go-ceph/blob/master/rbd/diff_iterate.go#L36>)

DiffWholeObject values control if the diff extents should cover the whole object\.

```go
type DiffWholeObject uint8
```

## type [EncryptionAlgorithm](<https://github.com/ceph/go-ceph/blob/master/rbd/encryption.go#L29>)

EncryptionAlgorithm is the encryption algorithm

```go
type EncryptionAlgorithm C.rbd_encryption_algorithm_t
```

## type [EncryptionOptions](<https://github.com/ceph/go-ceph/blob/master/rbd/encryption.go#L59-L61>)

EncryptionOptions interface is used to encapsulate the different encryption formats options and enable converting them from go to C structures\.

```go
type EncryptionOptions interface {
    // contains filtered or unexported methods
}
```

## type [EncryptionOptionsLUKS1](<https://github.com/ceph/go-ceph/blob/master/rbd/encryption.go#L46-L49>)

EncryptionOptionsLUKS1 options required for LUKS v1

```go
type EncryptionOptionsLUKS1 struct {
    Alg        EncryptionAlgorithm
    Passphrase []byte
}
```

## type [EncryptionOptionsLUKS2](<https://github.com/ceph/go-ceph/blob/master/rbd/encryption.go#L52-L55>)

EncryptionOptionsLUKS2 options required for LUKS v2

```go
type EncryptionOptionsLUKS2 struct {
    Alg        EncryptionAlgorithm
    Passphrase []byte
}
```

## type [FeatureSet](<https://github.com/ceph/go-ceph/blob/master/rbd/features.go#L114>)

FeatureSet is a combination of the bit value for multiple features\.

```go
type FeatureSet uint64
```

### func [FeatureSetFromNames](<https://github.com/ceph/go-ceph/blob/master/rbd/features.go#L132>)

```go
func FeatureSetFromNames(names []string) FeatureSet
```

FeatureSetFromNames returns a FeatureSet built from flag bits corresponding to the provided feature names\.

### func \(\*FeatureSet\) [Names](<https://github.com/ceph/go-ceph/blob/master/rbd/features.go#L142>)

```go
func (fs *FeatureSet) Names() []string
```

Names converts all of the enabled feature bits in the FeatureSet to a slice of strings corresponding to the names for each feature\.

## type [GlobalMirrorImageIDAndStatus](<https://github.com/ceph/go-ceph/blob/master/rbd/mirror.go#L635-L638>)

GlobalMirrorImageIDAndStatus values contain an ID string for a RBD image and that image's GlobalMirrorImageStatus\.

```go
type GlobalMirrorImageIDAndStatus struct {
    ID     string
    Status GlobalMirrorImageStatus
}
```

### func [MirrorImageGlobalStatusList](<https://github.com/ceph/go-ceph/blob/master/rbd/mirror.go#L654-L655>)

```go
func MirrorImageGlobalStatusList(ioctx *rados.IOContext, start string, max int) ([]GlobalMirrorImageIDAndStatus, error)
```

MirrorImageGlobalStatusList returns a slice of GlobalMirrorImageIDAndStatus\. If the length of the returned slice equals max\, the next chunk of the list can be obtained by setting start to the ID of the last item of the returned slice\. If max is 0 a slice of all items is returned\.

Implements: int rbd\_mirror\_image\_status\_list\(rados\_ioctx\_t p\, const char \*start\_id\, size\_t max\, char \*\*image\_ids\, rbd\_mirror\_image\_status\_t \*images\, size\_t \*len\)

## type [GlobalMirrorImageStatus](<https://github.com/ceph/go-ceph/blob/master/rbd/mirror.go#L379-L383>)

GlobalMirrorImageStatus contains information pertaining to the global status of a mirrored image\. It contains general information as well as per\-site information stored in the SiteStatuses slice\.

```go
type GlobalMirrorImageStatus struct {
    Name         string
    Info         MirrorImageInfo
    SiteStatuses []SiteMirrorImageStatus
}
```

### func \(GlobalMirrorImageStatus\) [LocalStatus](<https://github.com/ceph/go-ceph/blob/master/rbd/mirror.go#L388>)

```go
func (gmis GlobalMirrorImageStatus) LocalStatus() (SiteMirrorImageStatus, error)
```

LocalStatus returns one SiteMirrorImageStatus item from the SiteStatuses slice that corresponds to the local site's status\. If the local status is not found than the error ErrNotExist will be returned\.

## type [GroupImageInfo](<https://github.com/ceph/go-ceph/blob/master/rbd/group.go#L171-L175>)

GroupImageInfo reports on images within a group\.

```go
type GroupImageInfo struct {
    Name   string
    PoolID int64
    State  GroupImageState
}
```

### func [GroupImageList](<https://github.com/ceph/go-ceph/blob/master/rbd/group.go#L186>)

```go
func GroupImageList(ioctx *rados.IOContext, name string) ([]GroupImageInfo, error)
```

GroupImageList returns a slice of GroupImageInfo types based on the images that are part of the named group\.

Implements: int rbd\_group\_image\_list\(rados\_ioctx\_t group\_p\, const char \*group\_name\, rbd\_group\_image\_info\_t \*images\, size\_t group\_image\_info\_size\, size\_t \*num\_entries\);

## type [GroupImageState](<https://github.com/ceph/go-ceph/blob/master/rbd/group.go#L161>)

GroupImageState indicates an image's state in a group\.

```go
type GroupImageState int
```

## type [GroupInfo](<https://github.com/ceph/go-ceph/blob/master/rbd/group.go#L228-L231>)

GroupInfo contains the name and pool id of a RBD group\.

```go
type GroupInfo struct {
    Name   string
    PoolID int64
}
```

## type [GroupSnapInfo](<https://github.com/ceph/go-ceph/blob/master/rbd/group_snap.go#L93-L96>)

GroupSnapInfo values are returned by GroupSnapList\, representing the snapshots that are part of an rbd group\.

```go
type GroupSnapInfo struct {
    Name  string
    State GroupSnapState
}
```

### func [GroupSnapList](<https://github.com/ceph/go-ceph/blob/master/rbd/group_snap.go#L106>)

```go
func GroupSnapList(ioctx *rados.IOContext, group string) ([]GroupSnapInfo, error)
```

GroupSnapList returns a slice of snapshots in a group\.

Implements: int rbd\_group\_snap\_list\(rados\_ioctx\_t group\_p\, const char \*group\_name\, rbd\_group\_snap\_info\_t \*snaps\, size\_t group\_snap\_info\_size\, size\_t \*num\_entries\);

## type [GroupSnapRollbackCallback](<https://github.com/ceph/go-ceph/blob/master/rbd/group_snap.go#L168>)

GroupSnapRollbackCallback defines the function signature needed for the GroupSnapRollbackWithProgress callback\.

This callback will be called by GroupSnapRollbackWithProgress when it wishes to report progress rolling back a group snapshot\.

```go
type GroupSnapRollbackCallback func(uint64, uint64, interface{}) int
```

## type [GroupSnapState](<https://github.com/ceph/go-ceph/blob/master/rbd/group_snap.go#L82>)

GroupSnapState represents the state of a group snapshot in GroupSnapInfo\.

```go
type GroupSnapState int
```

## type [Image](<https://github.com/ceph/go-ceph/blob/master/rbd/rbd.go#L80-L90>)

Image is a handle for an RBD image\.

```go
type Image struct {
    io.Reader
    io.Writer
    io.Seeker
    io.ReaderAt
    io.WriterAt
    // contains filtered or unexported fields
}
```

### func [Create](<https://github.com/ceph/go-ceph/blob/master/rbd/rbd.go#L156-L157>)

```go
func Create(ioctx *rados.IOContext, name string, size uint64, order int, args ...uint64) (image *Image, err error)
```

Create a new rbd image\.

Implements: int rbd\_create\(rados\_ioctx\_t io\, const char \*name\, uint64\_t size\, int \*order\);

Also implements \(for backward compatibility\): int rbd\_create2\(rados\_ioctx\_t io\, const char \*name\, uint64\_t size\, uint64\_t features\, int \*order\); int rbd\_create3\(rados\_ioctx\_t io\, const char \*name\, uint64\_t size\, uint64\_t features\, int \*order\, uint64\_t stripe\_unit\, uint64\_t stripe\_count\);

### func [Create2](<https://github.com/ceph/go-ceph/blob/master/rbd/rbd.go#L193-L194>)

```go
func Create2(ioctx *rados.IOContext, name string, size uint64, features uint64, order int) (image *Image, err error)
```

Create2 creates a new rbd image using provided features\.

Implements: int rbd\_create2\(rados\_ioctx\_t io\, const char \*name\, uint64\_t size\, uint64\_t features\, int \*order\);

### func [Create3](<https://github.com/ceph/go-ceph/blob/master/rbd/rbd.go#L221-L222>)

```go
func Create3(ioctx *rados.IOContext, name string, size uint64, features uint64, order int, stripeUnit uint64, stripeCount uint64) (image *Image, err error)
```

Create3 creates a new rbd image using provided features and stripe parameters\.

Implements: int rbd\_create3\(rados\_ioctx\_t io\, const char \*name\, uint64\_t size\, uint64\_t features\, int \*order\, uint64\_t stripe\_unit\, uint64\_t stripe\_count\);

### func [GetImage](<https://github.com/ceph/go-ceph/blob/master/rbd/rbd.go#L138>)

```go
func GetImage(ioctx *rados.IOContext, name string) *Image
```

GetImage gets a reference to a previously created rbd image\.

### func [OpenImage](<https://github.com/ceph/go-ceph/blob/master/rbd/rbd.go#L1038>)

```go
func OpenImage(ioctx *rados.IOContext, name, snapName string) (*Image, error)
```

OpenImage will open an existing rbd image by name and snapshot name\, returning a new opened image\. Pass the NoSnapshot sentinel value as the snapName to explicitly indicate that no snapshot name is being provided\.

Implements: int rbd\_open\(rados\_ioctx\_t io\, const char \*name\, rbd\_image\_t \*image\, const char \*snap\_name\);

### func [OpenImageById](<https://github.com/ceph/go-ceph/blob/master/rbd/rbd.go#L1125>)

```go
func OpenImageById(ioctx *rados.IOContext, id, snapName string) (*Image, error)
```

OpenImageById will open an existing rbd image by ID and snapshot name\, returning a new opened image\. Pass the NoSnapshot sentinel value as the snapName to explicitly indicate that no snapshot name is being provided\. Error handling will fail & segfault unless compiled with a version of ceph that fixes https://tracker.ceph.com/issues/43178

Implements: int rbd\_open\_by\_id\(rados\_ioctx\_t io\, const char \*id\, rbd\_image\_t \*image\, const char \*snap\_name\);

### func [OpenImageByIdReadOnly](<https://github.com/ceph/go-ceph/blob/master/rbd/rbd.go#L1169>)

```go
func OpenImageByIdReadOnly(ioctx *rados.IOContext, id, snapName string) (*Image, error)
```

OpenImageByIdReadOnly will open an existing rbd image by ID and snapshot name\, returning a new opened\-for\-read image\. Pass the NoSnapshot sentinel value as the snapName to explicitly indicate that no snapshot name is being provided\. Error handling will fail & segfault unless compiled with a version of ceph that fixes https://tracker.ceph.com/issues/43178

Implements: int rbd\_open\_by\_id\_read\_only\(rados\_ioctx\_t io\, const char \*id\, rbd\_image\_t \*image\, const char \*snap\_name\);

### func [OpenImageReadOnly](<https://github.com/ceph/go-ceph/blob/master/rbd/rbd.go#L1081>)

```go
func OpenImageReadOnly(ioctx *rados.IOContext, name, snapName string) (*Image, error)
```

OpenImageReadOnly will open an existing rbd image by name and snapshot name\, returning a new opened\-for\-read image\.  Pass the NoSnapshot sentinel value as the snapName to explicitly indicate that no snapshot name is being provided\.

Implements: int rbd\_open\_read\_only\(rados\_ioctx\_t io\, const char \*name\, rbd\_image\_t \*image\, const char \*snap\_name\);

### func \(\*Image\) [BreakLock](<https://github.com/ceph/go-ceph/blob/master/rbd/rbd.go#L696>)

```go
func (image *Image) BreakLock(client string, cookie string) error
```

BreakLock forces the release of a lock held by another client\.

Implements: int rbd\_break\_lock\(rbd\_image\_t image\, const char \*client\, const char \*cookie\);

### func \(\*Image\) [Clone](<https://github.com/ceph/go-ceph/blob/master/rbd/rbd.go#L249>)

```go
func (image *Image) Clone(snapname string, cIoctx *rados.IOContext, cName string, features uint64, order int) (*Image, error)
```

Clone a new rbd image from a snapshot\.

Implements: int rbd\_clone\(rados\_ioctx\_t p\_ioctx\, const char \*p\_name\, const char \*p\_snapname\, rados\_ioctx\_t c\_ioctx\, const char \*c\_name\, uint64\_t features\, int \*c\_order\);

### func \(\*Image\) [Close](<https://github.com/ceph/go-ceph/blob/master/rbd/rbd.go#L374>)

```go
func (image *Image) Close() error
```

Close an open rbd image\.

Implements: int rbd\_close\(rbd\_image\_t image\);

### func \(\*Image\) [Copy](<https://github.com/ceph/go-ceph/blob/master/rbd/rbd.go#L512>)

```go
func (image *Image) Copy(ioctx *rados.IOContext, destname string) error
```

Copy one rbd image to another\.

Implements: int rbd\_copy\(rbd\_image\_t image\, rados\_ioctx\_t dest\_io\_ctx\, const char \*destname\);

### func \(\*Image\) [Copy2](<https://github.com/ceph/go-ceph/blob/master/rbd/rbd.go#L532>)

```go
func (image *Image) Copy2(dest *Image) error
```

Copy2 copies one rbd image to another\, using an image handle\.

Implements: int rbd\_copy2\(rbd\_image\_t src\, rbd\_image\_t dest\);

### func \(\*Image\) [CreateMirrorSnapshot](<https://github.com/ceph/go-ceph/blob/master/rbd/mirror.go#L463>)

```go
func (image *Image) CreateMirrorSnapshot() (uint64, error)
```

CreateMirrorSnapshot creates a snapshot for image propagation to mirrors\.

Implements: int rbd\_mirror\_image\_create\_snapshot\(rbd\_image\_t image\, uint64\_t \*snap\_id\);

### func \(\*Image\) [CreateSnapshot](<https://github.com/ceph/go-ceph/blob/master/rbd/snapshot.go#L25>)

```go
func (image *Image) CreateSnapshot(snapname string) (*Snapshot, error)
```

CreateSnapshot returns a new Snapshot objects after creating a snapshot of the rbd image\.

Implements: int rbd\_snap\_create\(rbd\_image\_t image\, const char \*snapname\);

### func \(\*Image\) [DeepCopy](<https://github.com/ceph/go-ceph/blob/master/rbd/rbd.go#L547>)

```go
func (image *Image) DeepCopy(ioctx *rados.IOContext, destname string, rio *ImageOptions) error
```

DeepCopy an rbd image to a new image with specific options\.

Implements: int rbd\_deep\_copy\(rbd\_image\_t src\, rados\_ioctx\_t dest\_io\_ctx\, const char \*destname\, rbd\_image\_options\_t dest\_opts\);

### func \(\*Image\) [DiffIterate](<https://github.com/ceph/go-ceph/blob/master/rbd/diff_iterate.go#L93>)

```go
func (image *Image) DiffIterate(config DiffIterateConfig) error
```

DiffIterate calls a callback on changed extents of an image\.

Calling DiffIterate will cause the callback specified in the DiffIterateConfig to be called as many times as there are changed regions in the image \(controlled by the parameters as passed to librbd\)\.

See the documentation of DiffIterateCallback for a description of the arguments to the callback and the return behavior\.

Implements: int rbd\_diff\_iterate2\(rbd\_image\_t image\, const char \*fromsnapname\, uint64\_t ofs\, uint64\_t len\, uint8\_t include\_parent\, uint8\_t whole\_object\, int \(\*cb\)\(uint64\_t\, size\_t\, int\, void \*\)\, void \*arg\);

### func \(\*Image\) [Discard](<https://github.com/ceph/go-ceph/blob/master/rbd/rbd.go#L794>)

```go
func (image *Image) Discard(ofs uint64, length uint64) (int, error)
```

Discard the supplied range from the image\. The supplied range will be read as zeros once Discard returns\. The discarded range will no longer take up space\.

Implements: int rbd\_discard\(rbd\_image\_t image\, uint64\_t ofs\, uint64\_t len\);

### func \(\*Image\) [EncryptionFormat](<https://github.com/ceph/go-ceph/blob/master/rbd/encryption.go#L102>)

```go
func (image *Image) EncryptionFormat(opts EncryptionOptions) error
```

#### EncryptionFormat creates an encryption format header

Implements: int rbd\_encryption\_format\(rbd\_image\_t image\, rbd\_encryption\_format\_t format\, rbd\_encryption\_options\_t opts\, size\_t opts\_size\);

To issue an IO against the image\, you need to mount the image with libvirt/qemu using the LUKS format\, or make a call to rbd\_encryption\_load\(\)\.

### func \(\*Image\) [EncryptionLoad](<https://github.com/ceph/go-ceph/blob/master/rbd/encryption.go#L126>)

```go
func (image *Image) EncryptionLoad(opts EncryptionOptions) error
```

#### EncryptionLoad enables IO on an open encrypted image

Implements: int rbd\_encryption\_load\(rbd\_image\_t image\, rbd\_encryption\_format\_t format\, rbd\_encryption\_options\_t opts\, size\_t opts\_size\);

### func \(\*Image\) [Flatten](<https://github.com/ceph/go-ceph/blob/master/rbd/rbd.go#L573>)

```go
func (image *Image) Flatten() error
```

Flatten removes snapshot references from the image\.

Implements: int rbd\_flatten\(rbd\_image\_t image\);

### func \(\*Image\) [Flush](<https://github.com/ceph/go-ceph/blob/master/rbd/rbd.go#L888>)

```go
func (image *Image) Flush() error
```

Flush all cached writes to storage\.

Implements: int rbd\_flush\(rbd\_image\_t image\);

### func \(\*Image\) [GetAccessTimestamp](<https://github.com/ceph/go-ceph/blob/master/rbd/rbd_nautilus.go#L72>)

```go
func (image *Image) GetAccessTimestamp() (Timespec, error)
```

GetAccessTimestamp returns the time the rbd image was last accessed\.

Implements: int rbd\_get\_access\_timestamp\(rbd\_image\_t image\, struct timespec \*timestamp\);

### func \(\*Image\) [GetCreateTimestamp](<https://github.com/ceph/go-ceph/blob/master/rbd/rbd_nautilus.go#L54>)

```go
func (image *Image) GetCreateTimestamp() (Timespec, error)
```

GetCreateTimestamp returns the time the rbd image was created\.

Implements: int rbd\_get\_create\_timestamp\(rbd\_image\_t image\, struct timespec \*timestamp\);

### func \(\*Image\) [GetFeatures](<https://github.com/ceph/go-ceph/blob/master/rbd/features.go#L158>)

```go
func (image *Image) GetFeatures() (features uint64, err error)
```

GetFeatures returns the features bitmask for the rbd image\.

Implements: int rbd\_get\_features\(rbd\_image\_t image\, uint64\_t \*features\);

### func \(\*Image\) [GetGlobalMirrorStatus](<https://github.com/ceph/go-ceph/blob/master/rbd/mirror.go#L416>)

```go
func (image *Image) GetGlobalMirrorStatus() (GlobalMirrorImageStatus, error)
```

GetGlobalMirrorStatus returns status information pertaining to the state of the images's mirroring\.

Implements: int rbd\_mirror\_image\_get\_global\_status\( rbd\_image\_t image\, rbd\_mirror\_image\_global\_status\_t \*mirror\_image\_global\_status\, size\_t status\_size\);

### func \(\*Image\) [GetGroup](<https://github.com/ceph/go-ceph/blob/master/rbd/group.go#L238>)

```go
func (image *Image) GetGroup() (GroupInfo, error)
```

GetGroup returns group info for the group this image is part of\.

Implements: int rbd\_get\_group\(rbd\_image\_t image\, rbd\_group\_info\_t \*group\_info\, size\_t group\_info\_size\);

### func \(\*Image\) [GetId](<https://github.com/ceph/go-ceph/blob/master/rbd/rbd.go#L933>)

```go
func (image *Image) GetId() (string, error)
```

GetId returns the internal image ID string\.

Implements: int rbd\_get\_id\(rbd\_image\_t image\, char \*id\, size\_t id\_len\);

### func \(\*Image\) [GetImageMirrorMode](<https://github.com/ceph/go-ceph/blob/master/rbd/mirror.go#L312>)

```go
func (image *Image) GetImageMirrorMode() (ImageMirrorMode, error)
```

GetImageMirrorMode fetches the mirroring approach for an RBD image\.

Implements: int rbd\_mirror\_image\_get\_mode\(rbd\_image\_t image\, rbd\_mirror\_image\_mode\_t \*mode\);

### func \(\*Image\) [GetMetadata](<https://github.com/ceph/go-ceph/blob/master/rbd/metadata.go#L19>)

```go
func (image *Image) GetMetadata(key string) (string, error)
```

GetMetadata returns the metadata string associated with the given key\.

Implements: int rbd\_metadata\_get\(rbd\_image\_t image\, const char \*key\, char \*value\, size\_t \*vallen\)

### func \(\*Image\) [GetMirrorImageInfo](<https://github.com/ceph/go-ceph/blob/master/rbd/mirror.go#L286>)

```go
func (image *Image) GetMirrorImageInfo() (*MirrorImageInfo, error)
```

GetMirrorImageInfo fetches the mirroring status information of a RBD image\.

Implements: int rbd\_mirror\_image\_get\_info\(rbd\_image\_t image\, rbd\_mirror\_image\_info\_t \*mirror\_image\_info\, size\_t info\_size\)

### func \(\*Image\) [GetModifyTimestamp](<https://github.com/ceph/go-ceph/blob/master/rbd/rbd_nautilus.go#L90>)

```go
func (image *Image) GetModifyTimestamp() (Timespec, error)
```

GetModifyTimestamp returns the time the rbd image was last modified\.

Implements: int rbd\_get\_modify\_timestamp\(rbd\_image\_t image\, struct timespec \*timestamp\);

### func \(\*Image\) [GetName](<https://github.com/ceph/go-ceph/blob/master/rbd/rbd.go#L959>)

```go
func (image *Image) GetName() string
```

GetName returns the image name\.

### func \(\*Image\) [GetOverlap](<https://github.com/ceph/go-ceph/blob/master/rbd/rbd.go#L496>)

```go
func (image *Image) GetOverlap() (overlap uint64, err error)
```

GetOverlap returns the overlapping bytes between the rbd image and its parent\.

Implements: int rbd\_get\_overlap\(rbd\_image\_t image\, uint64\_t \*overlap\);

### func \(\*Image\) [GetParent](<https://github.com/ceph/go-ceph/blob/master/rbd/snapshot_nautilus.go#L91>)

```go
func (image *Image) GetParent() (*ParentInfo, error)
```

GetParent looks for the parent of the image and returns the parent image information which includes the image name\, the pool name and the snapshot information\.

Implements: int rbd\_get\_parent\(rbd\_image\_t image\, rbd\_linked\_image\_spec\_t \*parent\_image\, rbd\_snap\_spec\_t \*parent\_snap\)

### func \(\*Image\) [GetParentInfo](<https://github.com/ceph/go-ceph/blob/master/rbd/snapshot_nautilus.go#L25>)

```go
func (image *Image) GetParentInfo(pool, name, snapname []byte) error
```

GetParentInfo looks for the parent of the image and stores the pool\, name and snapshot\-name in the byte\-arrays that are passed as arguments\.

Implements: int rbd\_get\_parent\(rbd\_image\_t image\, rbd\_linked\_image\_spec\_t \*parent\_image\, rbd\_snap\_spec\_t \*parent\_snap\)

### func \(\*Image\) [GetSize](<https://github.com/ceph/go-ceph/blob/master/rbd/rbd.go#L445>)

```go
func (image *Image) GetSize() (size uint64, err error)
```

GetSize returns the size of the rbd image\.

Implements: int rbd\_size\(rbd\_image\_t image\, uint64\_t \*size\);

### func \(\*Image\) [GetSnapByID](<https://github.com/ceph/go-ceph/blob/master/rbd/snapshot_octopus.go#L41>)

```go
func (image *Image) GetSnapByID(snapID uint64) (string, error)
```

GetSnapByID returns the snapshot name for the given snapshot ID\.

Implements: int rbd\_snap\_get\_name\(rbd\_image\_t image\, uint64\_t snap\_id\, char \*snapname\, size\_t \*name\_len\)

### func \(\*Image\) [GetSnapID](<https://github.com/ceph/go-ceph/blob/master/rbd/snapshot_octopus.go#L21>)

```go
func (image *Image) GetSnapID(snapName string) (uint64, error)
```

GetSnapID returns the snapshot ID for the given snapshot name\.

Implements: int rbd\_snap\_get\_id\(rbd\_image\_t image\, const char \*snapname\, uint64\_t \*snap\_id\)

### func \(\*Image\) [GetSnapNamespaceType](<https://github.com/ceph/go-ceph/blob/master/rbd/snapshot_namespace.go#L36>)

```go
func (image *Image) GetSnapNamespaceType(snapID uint64) (SnapNamespaceType, error)
```

GetSnapNamespaceType gets the type of namespace to which the snapshot belongs to\, returns error on failure\.

Implements: int rbd\_snap\_get\_namespace\_type\(rbd\_image\_t image\, uint64\_t snap\_id\, rbd\_snap\_namespace\_type\_t \*namespace\_type\)

### func \(\*Image\) [GetSnapTimestamp](<https://github.com/ceph/go-ceph/blob/master/rbd/snapshot.go#L172>)

```go
func (image *Image) GetSnapTimestamp(snapID uint64) (Timespec, error)
```

GetSnapTimestamp returns the timestamp of a snapshot for an image\. For a non\-existing snap ID\, GetSnapTimestamp\(\) may trigger an assertion and crash in the ceph library\. Check https://tracker.ceph.com/issues/47287 for details\.

Implements: int rbd\_snap\_get\_timestamp\(rbd\_image\_t image\, uint64\_t snap\_id\, struct timespec \*timestamp\)

### func \(\*Image\) [GetSnapTrashNamespace](<https://github.com/ceph/go-ceph/blob/master/rbd/snapshot_namespace.go#L55>)

```go
func (image *Image) GetSnapTrashNamespace(snapID uint64) (string, error)
```

GetSnapTrashNamespace returns the original name of the snapshot which was moved to the Trash\. The caller should make sure that the snapshot ID passed in this function belongs to a snapshot already in the Trash\.

Implements: int rbd\_snap\_get\_trash\_namespace\(rbd\_image\_t image\, uint64\_t snap\_id\, char \*original\_name\, size\_t max\_length\)

### func \(\*Image\) [GetSnapshot](<https://github.com/ceph/go-ceph/blob/master/rbd/snapshot.go#L59>)

```go
func (image *Image) GetSnapshot(snapname string) *Snapshot
```

GetSnapshot constructs a snapshot object for the image given the snap name\. It does not validate that this snapshot exists\.

### func \(\*Image\) [GetSnapshotNames](<https://github.com/ceph/go-ceph/blob/master/rbd/rbd.go#L901>)

```go
func (image *Image) GetSnapshotNames() (snaps []SnapInfo, err error)
```

GetSnapshotNames returns more than just the names of snapshots associated with the rbd image\.

Implements: int rbd\_snap\_list\(rbd\_image\_t image\, rbd\_snap\_info\_t \*snaps\, int \*max\_snaps\);

### func \(\*Image\) [GetStripeCount](<https://github.com/ceph/go-ceph/blob/master/rbd/rbd.go#L478>)

```go
func (image *Image) GetStripeCount() (uint64, error)
```

GetStripeCount returns the stripe\-count value for the rbd image\.

Implements: int rbd\_get\_stripe\_count\(rbd\_image\_t image\, uint64\_t \*stripe\_count\);

### func \(\*Image\) [GetStripeUnit](<https://github.com/ceph/go-ceph/blob/master/rbd/rbd.go#L461>)

```go
func (image *Image) GetStripeUnit() (uint64, error)
```

GetStripeUnit returns the stripe\-unit value for the rbd image\.

Implements: int rbd\_get\_stripe\_unit\(rbd\_image\_t image\, uint64\_t \*stripe\_unit\);

### func \(\*Image\) [IsOldFormat](<https://github.com/ceph/go-ceph/blob/master/rbd/rbd.go#L426>)

```go
func (image *Image) IsOldFormat() (bool, error)
```

IsOldFormat returns true if the rbd image uses the old format\.

Implements: int rbd\_get\_old\_format\(rbd\_image\_t image\, uint8\_t \*old\);

### func \(\*Image\) [ListChildren](<https://github.com/ceph/go-ceph/blob/master/rbd/snapshot_nautilus.go#L128>)

```go
func (image *Image) ListChildren() (pools []string, images []string, err error)
```

ListChildren returns arrays with the pools and names of the images that are children of the given image\. The index of the pools and images arrays can be used to link the two items together\.

Implements: int rbd\_list\_children3\(rbd\_image\_t image\, rbd\_linked\_image\_spec\_t \*images\, size\_t \*max\_images\);

### func \(\*Image\) [ListLockers](<https://github.com/ceph/go-ceph/blob/master/rbd/rbd.go#L589>)

```go
func (image *Image) ListLockers() (tag string, lockers []Locker, err error)
```

ListLockers returns a list of clients that have locks on the image\.

Impelemnts: ssize\_t rbd\_list\_lockers\(rbd\_image\_t image\, int \*exclusive\, char \*tag\, size\_t \*tag\_len\, char \*clients\, size\_t \*clients\_len\, char \*cookies\, size\_t \*cookies\_len\, char \*addrs\, size\_t \*addrs\_len\);

### func \(\*Image\) [ListMetadata](<https://github.com/ceph/go-ceph/blob/master/rbd/metadata.go#L94>)

```go
func (image *Image) ListMetadata() (map[string]string, error)
```

ListMetadata returns a map containing all metadata assigned to the RBD image\.

Implements: int rbd\_metadata\_list\(rbd\_image\_t image\, const char \*start\, uint64\_t max\, char \*keys\, size\_t \*key\_len\, char \*values\, size\_t \*vals\_len\);

### func \(\*Image\) [ListWatchers](<https://github.com/ceph/go-ceph/blob/master/rbd/watchers.go#L39>)

```go
func (image *Image) ListWatchers() ([]ImageWatcher, error)
```

ListWatchers returns the watchers on an RBD image\. In case of an error\, nil and an error are returned\.

Note: Only supported in Ceph Mimic and newer\.

Implements: int rbd\_watchers\_list\(rbd\_image\_t image\, rbd\_image\_watcher\_t \*watchers\, size\_t \*max\_watchers\)

### func \(\*Image\) [LockExclusive](<https://github.com/ceph/go-ceph/blob/master/rbd/rbd.go#L649>)

```go
func (image *Image) LockExclusive(cookie string) error
```

LockExclusive acquires an exclusive lock on the rbd image\.

Implements: int rbd\_lock\_exclusive\(rbd\_image\_t image\, const char \*cookie\);

### func \(\*Image\) [LockShared](<https://github.com/ceph/go-ceph/blob/master/rbd/rbd.go#L664>)

```go
func (image *Image) LockShared(cookie string, tag string) error
```

LockShared acquires a shared lock on the rbd image\.

Implements: int rbd\_lock\_shared\(rbd\_image\_t image\, const char \*cookie\, const char \*tag\);

### func \(\*Image\) [MirrorDemote](<https://github.com/ceph/go-ceph/blob/master/rbd/mirror.go#L184>)

```go
func (image *Image) MirrorDemote() error
```

MirrorDemote will demote the image to secondary status\.

Implements: int rbd\_mirror\_image\_demote\(rbd\_image\_t image\);

### func \(\*Image\) [MirrorDisable](<https://github.com/ceph/go-ceph/blob/master/rbd/mirror.go#L160>)

```go
func (image *Image) MirrorDisable(force bool) error
```

MirrorDisable will disable mirroring for the image\.

Implements: int rbd\_mirror\_image\_disable\(rbd\_image\_t image\, bool force\);

### func \(\*Image\) [MirrorEnable](<https://github.com/ceph/go-ceph/blob/master/rbd/mirror.go#L148>)

```go
func (image *Image) MirrorEnable(mode ImageMirrorMode) error
```

MirrorEnable will enable mirroring for an image using the specified mode\.

Implements: int rbd\_mirror\_image\_enable2\(rbd\_image\_t image\, rbd\_mirror\_image\_mode\_t mode\);

### func \(\*Image\) [MirrorInstanceID](<https://github.com/ceph/go-ceph/blob/master/rbd/mirror.go#L211>)

```go
func (image *Image) MirrorInstanceID() (string, error)
```

MirrorInstanceID returns a string naming the instance id for the image\.

Implements: int rbd\_mirror\_image\_get\_instance\_id\(rbd\_image\_t image\, char \*instance\_id\, size\_t \*id\_max\_length\);

### func \(\*Image\) [MirrorPromote](<https://github.com/ceph/go-ceph/blob/master/rbd/mirror.go#L172>)

```go
func (image *Image) MirrorPromote(force bool) error
```

MirrorPromote will promote the image to primary status\.

Implements: int rbd\_mirror\_image\_promote\(rbd\_image\_t image\, bool force\);

### func \(\*Image\) [MirrorResync](<https://github.com/ceph/go-ceph/blob/master/rbd/mirror.go#L197>)

```go
func (image *Image) MirrorResync() error
```

MirrorResync is used to manually resolve split\-brain status by triggering resynchronization\.

Implements: int rbd\_mirror\_image\_resync\(rbd\_image\_t image\);

### func \(\*Image\) [Open](<https://github.com/ceph/go-ceph/blob/master/rbd/rbd.go#L333>)

```go
func (image *Image) Open(args ...interface{}) error
```

Open the rbd image\.

Deprecated: use OpenImage and OpenImageReadOnly instead

### func \(\*Image\) [Read](<https://github.com/ceph/go-ceph/blob/master/rbd/rbd.go#L716>)

```go
func (image *Image) Read(data []byte) (int, error)
```

Read data from the image\. The length of the read is determined by the length of the buffer slice\. The position of the read is determined by an internal offset which is not safe in concurrent code\. Prefer ReadAt when possible\.

Implements: ssize\_t rbd\_read\(rbd\_image\_t image\, uint64\_t ofs\, size\_t len\, char \*buf\);

### func \(\*Image\) [ReadAt](<https://github.com/ceph/go-ceph/blob/master/rbd/rbd.go#L808>)

```go
func (image *Image) ReadAt(data []byte, off int64) (int, error)
```

ReadAt copies data from the image into the supplied buffer\.

### func \(\*Image\) [Remove](<https://github.com/ceph/go-ceph/blob/master/rbd/rbd.go#L285>)

```go
func (image *Image) Remove() error
```

Remove the specified rbd image\.

Implements: int rbd\_remove\(rados\_ioctx\_t io\, const char \*name\);

### func \(\*Image\) [RemoveMetadata](<https://github.com/ceph/go-ceph/blob/master/rbd/metadata.go#L73>)

```go
func (image *Image) RemoveMetadata(key string) error
```

RemoveMetadata clears the metadata associated with the given key\.

Implements: int rbd\_metadata\_remove\(rbd\_image\_t image\, const char \*key\)

### func \(\*Image\) [Rename](<https://github.com/ceph/go-ceph/blob/master/rbd/rbd.go#L310>)

```go
func (image *Image) Rename(destname string) error
```

Rename an rbd image\.

Implements: int rbd\_rename\(rados\_ioctx\_t src\_io\_ctx\, const char \*srcname\, const char \*destname\);

### func \(\*Image\) [Resize](<https://github.com/ceph/go-ceph/blob/master/rbd/rbd.go#L391>)

```go
func (image *Image) Resize(size uint64) error
```

Resize an rbd image\.

Implements: int rbd\_resize\(rbd\_image\_t image\, uint64\_t size\);

### func \(\*Image\) [Seek](<https://github.com/ceph/go-ceph/blob/master/rbd/rbd.go#L770>)

```go
func (image *Image) Seek(offset int64, whence int) (int64, error)
```

Seek updates the internal file position for the current image\.

### func \(\*Image\) [SetMetadata](<https://github.com/ceph/go-ceph/blob/master/rbd/metadata.go#L51>)

```go
func (image *Image) SetMetadata(key string, value string) error
```

SetMetadata updates the metadata string associated with the given key\.

Implements: int rbd\_metadata\_set\(rbd\_image\_t image\, const char \*key\, const char \*value\)

### func \(\*Image\) [SetSnapByID](<https://github.com/ceph/go-ceph/blob/master/rbd/snapshot_nautilus.go#L166>)

```go
func (image *Image) SetSnapByID(snapID uint64) error
```

SetSnapByID updates the rbd image \(not the Snapshot\) such that the snapshot is the source of readable data\.

Implements: int rbd\_snap\_set\_by\_id\(rbd\_image\_t image\, uint64\_t snap\_id\);

### func \(\*Image\) [SetSnapshot](<https://github.com/ceph/go-ceph/blob/master/rbd/rbd.go#L968>)

```go
func (image *Image) SetSnapshot(snapname string) error
```

SetSnapshot updates the rbd image \(not the Snapshot\) such that the snapshot is the source of readable data\.

Implements: int rbd\_snap\_set\(rbd\_image\_t image\, const char \*snapname\);

### func \(\*Image\) [Sparsify](<https://github.com/ceph/go-ceph/blob/master/rbd/rbd_nautilus.go#L110>)

```go
func (image *Image) Sparsify(sparseSize uint) error
```

Sparsify makes an image sparse by deallocating runs of zeros\. The sparseSize value will be used to find runs of zeros and must be a power of two no less than 4096 and no larger than the image size\.

Implements: int rbd\_sparsify\(rbd\_image\_t image\, size\_t sparse\_size\);

### func \(\*Image\) [Stat](<https://github.com/ceph/go-ceph/blob/master/rbd/rbd.go#L403>)

```go
func (image *Image) Stat() (info *ImageInfo, err error)
```

Stat an rbd image\.

Implements: int rbd\_stat\(rbd\_image\_t image\, rbd\_image\_info\_t \*info\, size\_t infosize\);

### func \(\*Image\) [Trash](<https://github.com/ceph/go-ceph/blob/master/rbd/rbd.go#L294>)

```go
func (image *Image) Trash(delay time.Duration) error
```

Trash will move an image into the RBD trash\, where it will be protected \(i\.e\.\, salvageable\) for at least the specified delay\.

### func \(\*Image\) [Unlock](<https://github.com/ceph/go-ceph/blob/master/rbd/rbd.go#L681>)

```go
func (image *Image) Unlock(cookie string) error
```

Unlock releases a lock on the image\.

Implements: int rbd\_lock\_shared\(rbd\_image\_t image\, const char \*cookie\, const char \*tag\);

### func \(\*Image\) [UpdateFeatures](<https://github.com/ceph/go-ceph/blob/master/rbd/features.go#L175>)

```go
func (image *Image) UpdateFeatures(features uint64, enabled bool) error
```

UpdateFeatures updates the features on the Image\.

Implements: int rbd\_update\_features\(rbd\_image\_t image\, uint64\_t features\, uint8\_t enabled\);

### func \(\*Image\) [UpdateWatch](<https://github.com/ceph/go-ceph/blob/master/rbd/watchers.go#L96>)

```go
func (image *Image) UpdateWatch(cb WatchCallback, data interface{}) (*Watch, error)
```

UpdateWatch updates the image object to watch metadata changes to the image\, returning a Watch object\.

Implements: int rbd\_update\_watch\(rbd\_image\_t image\, uint64\_t \*handle\, rbd\_update\_callback\_t watch\_cb\, void \*arg\);

### func \(\*Image\) [Write](<https://github.com/ceph/go-ceph/blob/master/rbd/rbd.go#L750>)

```go
func (image *Image) Write(data []byte) (n int, err error)
```

Write data to an image\. The length of the write is determined by the length of the buffer slice\. The position of the write is determined by an internal offset which is not safe in concurrent code\. Prefer WriteAt when possible\.

Implements: ssize\_t rbd\_write\(rbd\_image\_t image\, uint64\_t ofs\, size\_t len\, const char \*buf\);

### func \(\*Image\) [WriteAt](<https://github.com/ceph/go-ceph/blob/master/rbd/rbd.go#L835>)

```go
func (image *Image) WriteAt(data []byte, off int64) (n int, err error)
```

WriteAt copies data from the supplied buffer to the image\.

### func \(\*Image\) [WriteSame](<https://github.com/ceph/go-ceph/blob/master/rbd/rbd.go#L860>)

```go
func (image *Image) WriteSame(ofs, n uint64, data []byte, flags rados.OpFlags) (int64, error)
```

WriteSame repeats writing data from starting point ofs until n bytes have been written\.

Implements: ssize\_t rbd\_writesame\(rbd\_image\_t image\, uint64\_t ofs\, size\_t len\, const char \*buf\, size\_t data\_len\, int op\_flags\);

## type [ImageInfo](<https://github.com/ceph/go-ceph/blob/master/rbd/rbd.go#L55-L61>)

ImageInfo represents the status information for an image\.

```go
type ImageInfo struct {
    Size              uint64
    Obj_size          uint64
    Num_objs          uint64
    Order             int
    Block_name_prefix string
}
```

## type [ImageMirrorMode](<https://github.com/ceph/go-ceph/blob/master/rbd/mirror.go#L52>)

ImageMirrorMode is used to indicate the mirroring approach for an RBD image\.

```go
type ImageMirrorMode int64
```

### func \(ImageMirrorMode\) [String](<https://github.com/ceph/go-ceph/blob/master/rbd/mirror.go#L74>)

```go
func (imm ImageMirrorMode) String() string
```

String representation of ImageMirrorMode\.

## type [ImageMirrorModeFilter](<https://github.com/ceph/go-ceph/blob/master/rbd/mirror.go#L55-L57>)

ImageMirrorModeFilter is a ImageMirrorMode or nil for no filtering

```go
type ImageMirrorModeFilter interface {
    // contains filtered or unexported methods
}
```

## type [ImageOption](<https://github.com/ceph/go-ceph/blob/master/rbd/options.go#L86>)

ImageOption values are unique keys for configurable options\.

```go
type ImageOption C.int
```

## type [ImageOptions](<https://github.com/ceph/go-ceph/blob/master/rbd/options.go#L81-L83>)

ImageOptions represents a group of configurable image options\.

```go
type ImageOptions struct {
    // contains filtered or unexported fields
}
```

### func [NewRbdImageOptions](<https://github.com/ceph/go-ceph/blob/master/rbd/options.go#L103>)

```go
func NewRbdImageOptions() *ImageOptions
```

NewRbdImageOptions creates a new RbdImageOptions struct\. Call RbdImageOptions\.Destroy\(\) to free the resources\.

Implements: void rbd\_image\_options\_create\(rbd\_image\_options\_t\* opts\)

### func \(\*ImageOptions\) [Clear](<https://github.com/ceph/go-ceph/blob/master/rbd/options.go#L219>)

```go
func (rio *ImageOptions) Clear()
```

Clear all options in the RbdImageOptions\.

Implements: void rbd\_image\_options\_clear\(rbd\_image\_options\_t opts\)

### func \(\*ImageOptions\) [Destroy](<https://github.com/ceph/go-ceph/blob/master/rbd/options.go#L113>)

```go
func (rio *ImageOptions) Destroy()
```

Destroy a RbdImageOptions struct and free the associated resources\.

Implements: void rbd\_image\_options\_destroy\(rbd\_image\_options\_t opts\);

### func \(\*ImageOptions\) [GetString](<https://github.com/ceph/go-ceph/blob/master/rbd/options.go#L140>)

```go
func (rio *ImageOptions) GetString(option ImageOption) (string, error)
```

GetString returns the string value of the RbdImageOption\.

Implements: int rbd\_image\_options\_get\_string\(rbd\_image\_options\_t opts\, int optname\, char\* optval\, size\_t maxlen\);

### func \(\*ImageOptions\) [GetUint64](<https://github.com/ceph/go-ceph/blob/master/rbd/options.go#L175>)

```go
func (rio *ImageOptions) GetUint64(option ImageOption) (uint64, error)
```

GetUint64 returns the uint64 value of the RbdImageOption\.

Implements: int rbd\_image\_options\_get\_uint64\(rbd\_image\_options\_t opts\, int optname\, uint64\_t\* optval\);

### func \(\*ImageOptions\) [IsEmpty](<https://github.com/ceph/go-ceph/blob/master/rbd/options.go#L228>)

```go
func (rio *ImageOptions) IsEmpty() bool
```

IsEmpty returns true if there are no options set in the RbdImageOptions\, false otherwise\.

Implements: int rbd\_image\_options\_is\_empty\(rbd\_image\_options\_t opts\)

### func \(\*ImageOptions\) [IsSet](<https://github.com/ceph/go-ceph/blob/master/rbd/options.go#L191>)

```go
func (rio *ImageOptions) IsSet(option ImageOption) (bool, error)
```

IsSet returns a true if the RbdImageOption is set\, false otherwise\.

Implements: int rbd\_image\_options\_is\_set\(rbd\_image\_options\_t opts\, int optname\, bool\* is\_set\);

### func \(\*ImageOptions\) [SetString](<https://github.com/ceph/go-ceph/blob/master/rbd/options.go#L122>)

```go
func (rio *ImageOptions) SetString(option ImageOption, value string) error
```

SetString sets the value of the RbdImageOption to the given string\.

Implements: int rbd\_image\_options\_set\_string\(rbd\_image\_options\_t opts\, int optname\, const char\* optval\);

### func \(\*ImageOptions\) [SetUint64](<https://github.com/ceph/go-ceph/blob/master/rbd/options.go#L158>)

```go
func (rio *ImageOptions) SetUint64(option ImageOption, value uint64) error
```

SetUint64 sets the value of the RbdImageOption to the given uint64\.

Implements: int rbd\_image\_options\_set\_uint64\(rbd\_image\_options\_t opts\, int optname\, const uint64\_t optval\);

### func \(\*ImageOptions\) [Unset](<https://github.com/ceph/go-ceph/blob/master/rbd/options.go#L206>)

```go
func (rio *ImageOptions) Unset(option ImageOption) error
```

Unset a given RbdImageOption\.

Implements: int rbd\_image\_options\_unset\(rbd\_image\_options\_t opts\, int optname\)

## type [ImageSpec](<https://github.com/ceph/go-ceph/blob/master/rbd/snapshot_nautilus.go#L68-L71>)

ImageSpec represents the image information\.

```go
type ImageSpec struct {
    ImageName string
    PoolName  string
}
```

## type [ImageWatcher](<https://github.com/ceph/go-ceph/blob/master/rbd/watchers.go#L24-L28>)

ImageWatcher is a representation of the rbd\_image\_watcher\_t from librbd\.h

```go
type ImageWatcher struct {
    Addr   string
    Id     int64
    Cookie uint64
}
```

## type [Locker](<https://github.com/ceph/go-ceph/blob/master/rbd/rbd.go#L73-L77>)

Locker provides info about a client that is locking an image\.

```go
type Locker struct {
    Client string
    Cookie string
    Addr   string
}
```

## type [MirrorImageGlobalStatusIter](<https://github.com/ceph/go-ceph/blob/master/rbd/mirror.go#L717-L722>)

MirrorImageGlobalStatusIter provide methods for iterating over all the GlobalMirrorImageIdAndStatus values in a pool\.

```go
type MirrorImageGlobalStatusIter struct {
    // contains filtered or unexported fields
}
```

### func [NewMirrorImageGlobalStatusIter](<https://github.com/ceph/go-ceph/blob/master/rbd/mirror.go#L725>)

```go
func NewMirrorImageGlobalStatusIter(ioctx *rados.IOContext) *MirrorImageGlobalStatusIter
```

NewMirrorImageGlobalStatusIter creates a new iterator type ready for use\.

### func \(\*MirrorImageGlobalStatusIter\) [Close](<https://github.com/ceph/go-ceph/blob/master/rbd/mirror.go#L753>)

```go
func (*MirrorImageGlobalStatusIter) Close() error
```

Close terminates iteration regardless if iteration was completed and frees any associated resources\.

Deprecated: not required

### func \(\*MirrorImageGlobalStatusIter\) [Next](<https://github.com/ceph/go-ceph/blob/master/rbd/mirror.go#L734>)

```go
func (iter *MirrorImageGlobalStatusIter) Next() (*GlobalMirrorImageIDAndStatus, error)
```

Next fetches one GlobalMirrorImageIDAndStatus value or a nil value if iteration is exhausted\. The error return will be non\-nil if an underlying error fetching more values occurred\.

## type [MirrorImageInfo](<https://github.com/ceph/go-ceph/blob/master/rbd/mirror.go#L266-L270>)

MirrorImageInfo represents the mirroring status information of a RBD image\.

```go
type MirrorImageInfo struct {
    GlobalID string
    State    MirrorImageState
    Primary  bool
}
```

## type [MirrorImageInfoItem](<https://github.com/ceph/go-ceph/blob/master/rbd/mirror.go#L775-L779>)

MirrorImageInfoItem contains an ID string for a RBD image and that image's ImageMirrorMode and MirrorImageInfo\.

```go
type MirrorImageInfoItem struct {
    ID   string
    Mode ImageMirrorMode
    Info MirrorImageInfo
}
```

### func [MirrorImageInfoList](<https://github.com/ceph/go-ceph/blob/master/rbd/mirror.go#L793-L795>)

```go
func MirrorImageInfoList(ioctx *rados.IOContext, modeFilter ImageMirrorModeFilter, start string, max int) ([]MirrorImageInfoItem, error)
```

MirrorImageInfoList returns a slice of MirrorImageInfoItem\. If the length of the returned slice equals max\, the next chunk of the list can be obtained by setting start to the ID of the last item of the returned slice\. The returned items are filtered by the mirror mode specified with modeFilter\. If max is 0 a slice of all items is returned\.

Implements: int rbd\_mirror\_image\_info\_list\( rados\_ioctx\_t p\, rbd\_mirror\_image\_mode\_t \*mode\_filter\, const char \*start\_id\, size\_t max\, char \*\*image\_ids\, rbd\_mirror\_image\_mode\_t \*mode\_entries\, rbd\_mirror\_image\_info\_t \*info\_entries\, size\_t \*num\_entries\)

## type [MirrorImageInfoIter](<https://github.com/ceph/go-ceph/blob/master/rbd/mirror.go#L864-L870>)

MirrorImageInfoIter provide methods for iterating over all the MirrorImageInfoItem values in a pool\.

```go
type MirrorImageInfoIter struct {
    // contains filtered or unexported fields
}
```

### func [NewMirrorImageInfoIter](<https://github.com/ceph/go-ceph/blob/master/rbd/mirror.go#L873>)

```go
func NewMirrorImageInfoIter(ioctx *rados.IOContext, modeFilter ImageMirrorModeFilter) *MirrorImageInfoIter
```

NewMirrorImageInfoIter creates a new iterator ready for use\.

### func \(\*MirrorImageInfoIter\) [Next](<https://github.com/ceph/go-ceph/blob/master/rbd/mirror.go#L883>)

```go
func (iter *MirrorImageInfoIter) Next() (*MirrorImageInfoItem, error)
```

Next fetches one MirrorImageInfoItem value or a nil value if iteration is exhausted\. The error return will be non\-nil if an underlying error fetching more values occurred\.

## type [MirrorImageInstanceIDItem](<https://github.com/ceph/go-ceph/blob/master/rbd/mirror.go#L917-L920>)

MirrorImageInstanceIDItem contains an ID string for a RBD image and its corresponding mirrored image's Instance ID\.

```go
type MirrorImageInstanceIDItem struct {
    ID         string
    InstanceID string
}
```

### func [MirrorImageInstanceIDList](<https://github.com/ceph/go-ceph/blob/master/rbd/mirror.go#L934-L936>)

```go
func MirrorImageInstanceIDList(ioctx *rados.IOContext, start string, max int) ([]MirrorImageInstanceIDItem, error)
```

MirrorImageInstanceIDList returns a slice of MirrorImageInstanceIDItem\. If the length of the returned slice equals max\, the next chunk of the list can be obtained by setting start to the ID of the last item of the returned slice\. If max is 0 a slice of all items is returned\.

Implements: int rbd\_mirror\_image\_instance\_id\_list\( rados\_ioctx\_t io\_ctx\, const char \*start\_id\, size\_t max\, char \*\*image\_ids\, char \*\*instance\_ids\, size\_t \*len\)

## type [MirrorImageInstanceIDIter](<https://github.com/ceph/go-ceph/blob/master/rbd/mirror.go#L996-L1001>)

MirrorImageInstanceIDIter provide methods for iterating over all the MirrorImageInstanceIDItem values in a pool\.

```go
type MirrorImageInstanceIDIter struct {
    // contains filtered or unexported fields
}
```

### func [NewMirrorImageInstanceIDIter](<https://github.com/ceph/go-ceph/blob/master/rbd/mirror.go#L1004>)

```go
func NewMirrorImageInstanceIDIter(ioctx *rados.IOContext) *MirrorImageInstanceIDIter
```

NewMirrorImageInstanceIDIter creates a new iterator ready for use\.

### func \(\*MirrorImageInstanceIDIter\) [Next](<https://github.com/ceph/go-ceph/blob/master/rbd/mirror.go#L1013>)

```go
func (iter *MirrorImageInstanceIDIter) Next() (*MirrorImageInstanceIDItem, error)
```

Next fetches one MirrorImageInstanceIDItem value or a nil value if iteration is exhausted\. The error return will be non\-nil if an underlying error fetching more values occurred\.

## type [MirrorImageState](<https://github.com/ceph/go-ceph/blob/master/rbd/mirror.go#L237>)

MirrorImageState represents the mirroring state of a RBD image\.

```go
type MirrorImageState C.rbd_mirror_image_state_t
```

### func \(MirrorImageState\) [String](<https://github.com/ceph/go-ceph/blob/master/rbd/mirror.go#L252>)

```go
func (mis MirrorImageState) String() string
```

String representation of MirrorImageState\.

## type [MirrorImageStatusState](<https://github.com/ceph/go-ceph/blob/master/rbd/mirror.go#L324>)

MirrorImageStatusState is used to indicate the state of a mirrored image within the site status info\.

```go
type MirrorImageStatusState int64
```

### func \(MirrorImageStatusState\) [String](<https://github.com/ceph/go-ceph/blob/master/rbd/mirror.go#L344>)

```go
func (state MirrorImageStatusState) String() (s string)
```

String represents the MirrorImageStatusState as a short string\.

## type [MirrorMode](<https://github.com/ceph/go-ceph/blob/master/rbd/mirror.go#L26>)

MirrorMode is used to indicate an approach used for RBD mirroring\.

```go
type MirrorMode int64
```

### func [GetMirrorMode](<https://github.com/ceph/go-ceph/blob/master/rbd/mirror.go#L131>)

```go
func GetMirrorMode(ioctx *rados.IOContext) (MirrorMode, error)
```

GetMirrorMode is used to fetch the current mirroring mode for a pool\.

Implements: int rbd\_mirror\_mode\_get\(rados\_ioctx\_t io\_ctx\, rbd\_mirror\_mode\_t \*mirror\_mode\);

### func \(MirrorMode\) [String](<https://github.com/ceph/go-ceph/blob/master/rbd/mirror.go#L38>)

```go
func (m MirrorMode) String() string
```

String representation of MirrorMode\.

## type [MirrorPeerDirection](<https://github.com/ceph/go-ceph/blob/master/rbd/mirror.go#L597>)

MirrorPeerDirection is used to indicate what direction data is mirrored\.

```go
type MirrorPeerDirection int
```

## type [ParentInfo](<https://github.com/ceph/go-ceph/blob/master/rbd/snapshot_nautilus.go#L80-L83>)

ParentInfo represents the parent image and the parent snapshot information\.

```go
type ParentInfo struct {
    Image ImageSpec
    Snap  SnapSpec
}
```

## type [PoolStatOption](<https://github.com/ceph/go-ceph/blob/master/rbd/pool_nautilus.go#L130>)

PoolStatOption represents a group of configurable pool stat options\.

```go
type PoolStatOption C.rbd_pool_stat_option_t
```

## type [RbdImageOption](<https://github.com/ceph/go-ceph/blob/master/rbd/options.go#L94>)

RbdImageOption is a deprecated alias for ImageOption

```go
type RbdImageOption = ImageOption
```

## type [RbdImageOptions](<https://github.com/ceph/go-ceph/blob/master/rbd/options.go#L91>)

RbdImageOptions deprecated alias for ImageOptions

```go
type RbdImageOptions = ImageOptions
```

## type [SiteMirrorImageStatus](<https://github.com/ceph/go-ceph/blob/master/rbd/mirror.go#L368-L374>)

SiteMirrorImageStatus contains information pertaining to the status of a mirrored image within a site\.

```go
type SiteMirrorImageStatus struct {
    MirrorUUID  string
    State       MirrorImageStatusState
    Description string
    LastUpdate  int64
    Up          bool
}
```

## type [SnapInfo](<https://github.com/ceph/go-ceph/blob/master/rbd/rbd.go#L66-L70>)

SnapInfo represents the status information for a snapshot\.

```go
type SnapInfo struct {
    Id   uint64
    Size uint64
    Name string
}
```

## type [SnapNamespaceType](<https://github.com/ceph/go-ceph/blob/master/rbd/snapshot_namespace.go#L17>)

SnapNamespaceType indicates the namespace to which the snapshot belongs to\.

```go
type SnapNamespaceType C.rbd_snap_namespace_type_t
```

## type [SnapSpec](<https://github.com/ceph/go-ceph/blob/master/rbd/snapshot_nautilus.go#L74-L77>)

SnapSpec represents the snapshot infomation\.

```go
type SnapSpec struct {
    ID       uint64
    SnapName string
}
```

## type [Snapshot](<https://github.com/ceph/go-ceph/blob/master/rbd/snapshot.go#L15-L18>)

Snapshot represents a snapshot on a particular rbd image\.

```go
type Snapshot struct {
    // contains filtered or unexported fields
}
```

### func \(\*Snapshot\) [IsProtected](<https://github.com/ceph/go-ceph/blob/master/rbd/snapshot.go#L131>)

```go
func (snapshot *Snapshot) IsProtected() (bool, error)
```

IsProtected returns true if the snapshot is currently protected\.

Implements: int rbd\_snap\_is\_protected\(rbd\_image\_t image\, const char \*snap\_name\, int \*is\_protected\);

### func \(\*Snapshot\) [Protect](<https://github.com/ceph/go-ceph/blob/master/rbd/snapshot.go#L100>)

```go
func (snapshot *Snapshot) Protect() error
```

Protect a snapshot from unwanted deletion\.

Implements: int rbd\_snap\_protect\(rbd\_image\_t image\, const char \*snap\_name\);

### func \(\*Snapshot\) [Remove](<https://github.com/ceph/go-ceph/blob/master/rbd/snapshot.go#L70>)

```go
func (snapshot *Snapshot) Remove() error
```

Remove the snapshot from the connected rbd image\.

Implements: int rbd\_snap\_remove\(rbd\_image\_t image\, const char \*snapname\);

### func \(\*Snapshot\) [Rollback](<https://github.com/ceph/go-ceph/blob/master/rbd/snapshot.go#L85>)

```go
func (snapshot *Snapshot) Rollback() error
```

Rollback the image to the snapshot\.

Implements: int rbd\_snap\_rollback\(rbd\_image\_t image\, const char \*snapname\);

### func \(\*Snapshot\) [Set](<https://github.com/ceph/go-ceph/blob/master/rbd/snapshot.go#L157>)

```go
func (snapshot *Snapshot) Set() error
```

Set updates the rbd image \(not the Snapshot\) such that the snapshot is the source of readable data\.

Deprecated: use the SetSnapshot method of the Image type instead

Implements: int rbd\_snap\_set\(rbd\_image\_t image\, const char \*snapname\);

### func \(\*Snapshot\) [Unprotect](<https://github.com/ceph/go-ceph/blob/master/rbd/snapshot.go#L115>)

```go
func (snapshot *Snapshot) Unprotect() error
```

Unprotect stops protecting the snapshot\.

Implements: int rbd\_snap\_unprotect\(rbd\_image\_t image\, const char \*snap\_name\);

## type [Timespec](<https://github.com/ceph/go-ceph/blob/master/rbd/rbd.go#L50>)

Timespec is a public type for the internal C 'struct timespec'

```go
type Timespec ts.Timespec
```

## type [TrashInfo](<https://github.com/ceph/go-ceph/blob/master/rbd/rbd.go#L93-L98>)

TrashInfo contains information about trashed RBDs\.

```go
type TrashInfo struct {
    Id               string    // Id string, required to remove / restore trashed RBDs.
    Name             string    // Original name of trashed RBD.
    DeletionTime     time.Time // Date / time at which the RBD was moved to the trash.
    DefermentEndTime time.Time // Date / time after which the trashed RBD may be permanently deleted.
}
```

### func [GetTrashList](<https://github.com/ceph/go-ceph/blob/master/rbd/rbd.go#L981>)

```go
func GetTrashList(ioctx *rados.IOContext) ([]TrashInfo, error)
```

GetTrashList returns a slice of TrashInfo structs\, containing information about all RBD images currently residing in the trash\.

## type [Watch](<https://github.com/ceph/go-ceph/blob/master/rbd/watchers.go#L83-L88>)

Watch represents an ongoing image metadata watch\.

```go
type Watch struct {
    // contains filtered or unexported fields
}
```

### func \(\*Watch\) [Unwatch](<https://github.com/ceph/go-ceph/blob/master/rbd/watchers.go#L124>)

```go
func (w *Watch) Unwatch() error
```

Unwatch un\-registers the image watch\.

Implements: int rbd\_update\_unwatch\(rbd\_image\_t image\, uint64\_t handle\);

## type [WatchCallback](<https://github.com/ceph/go-ceph/blob/master/rbd/watchers.go#L75>)

WatchCallback defines the function signature needed for the UpdateWatch callback\.

```go
type WatchCallback func(interface{})
```



Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
